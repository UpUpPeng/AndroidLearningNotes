<!-- TOC -->

- [1. ç±»æ–‡ä»¶ç»“æ„](#1-ç±»æ–‡ä»¶ç»“æ„)
  - [1.1. é­”æ•°](#11-é­”æ•°)
  - [1.2. æ–‡ä»¶ç‰ˆæœ¬](#12-æ–‡ä»¶ç‰ˆæœ¬)
  - [1.3. å¸¸é‡æ± ](#13-å¸¸é‡æ± )
  - [1.4. è®¿é—®æ ‡è¯†ä¸ç»§æ‰¿ä¿¡æ¯](#14-è®¿é—®æ ‡è¯†ä¸ç»§æ‰¿ä¿¡æ¯)
  - [1.5. å­—æ®µä¿¡æ¯](#15-å­—æ®µä¿¡æ¯)
  - [1.6. æ–¹æ³•ä¿¡æ¯](#16-æ–¹æ³•ä¿¡æ¯)
  - [1.7. å±æ€§ä¿¡æ¯](#17-å±æ€§ä¿¡æ¯)
- [2. å­—èŠ‚ç æŒ‡ä»¤](#2-å­—èŠ‚ç æŒ‡ä»¤)
  - [2.1. å…¥é—¨](#21-å…¥é—¨)
  - [2.2. Javap å·¥å…·](#22-javap-å·¥å…·)
  - [2.3. æ–¹æ³•æ‰§è¡Œæµç¨‹](#23-æ–¹æ³•æ‰§è¡Œæµç¨‹)
  - [2.4. æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤](#24-æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤)
  - [2.5. å¾ªç¯æ§åˆ¶æŒ‡ä»¤](#25-å¾ªç¯æ§åˆ¶æŒ‡ä»¤)
  - [2.6. ä¸ºä»€ä¹ˆ x=x++ æ— æ•ˆ](#26-ä¸ºä»€ä¹ˆ-xx-æ— æ•ˆ)
  - [2.7. æ„é€ æ–¹æ³•](#27-æ„é€ æ–¹æ³•)
    - [2.7.1. \<cinit>()V æ–¹æ³•](#271-cinitv-æ–¹æ³•)
    - [2.7.2. \<init>()V æ–¹æ³•](#272-initv-æ–¹æ³•)
  - [2.8. æ–¹æ³•è°ƒç”¨](#28-æ–¹æ³•è°ƒç”¨)
  - [2.9. å¼‚å¸¸å¤„ç†](#29-å¼‚å¸¸å¤„ç†)
    - [2.9.1. try-catch-finally](#291-try-catch-finally)
    - [2.9.2. finally å‡ºç° return](#292-finally-å‡ºç°-return)
    - [2.9.3. finally å¯¹è¿”å›å€¼çš„å½±å“](#293-finally-å¯¹è¿”å›å€¼çš„å½±å“)
  - [2.10. synchronized](#210-synchronized)
- [3. ç±»åŠ è½½](#3-ç±»åŠ è½½)
  - [3.1. åŠ è½½](#31-åŠ è½½)
    - [3.1.1. éæ•°ç»„ç±»](#311-éæ•°ç»„ç±»)
    - [3.1.2. æ•°ç»„ç±»](#312-æ•°ç»„ç±»)
  - [3.2. éªŒè¯](#32-éªŒè¯)
    - [3.2.1. æ–‡ä»¶æ ¼å¼éªŒè¯](#321-æ–‡ä»¶æ ¼å¼éªŒè¯)
    - [3.2.2. å…ƒæ•°æ®éªŒè¯](#322-å…ƒæ•°æ®éªŒè¯)
    - [3.2.3. å­—èŠ‚ç éªŒè¯](#323-å­—èŠ‚ç éªŒè¯)
    - [3.2.4. ç¬¦å·å¼•ç”¨éªŒè¯](#324-ç¬¦å·å¼•ç”¨éªŒè¯)
  - [3.3. å‡†å¤‡](#33-å‡†å¤‡)
  - [3.4. è§£æ](#34-è§£æ)
  - [3.5. åˆå§‹åŒ–](#35-åˆå§‹åŒ–)
    - [3.5.1. åˆå§‹åŒ–é¡ºåº](#351-åˆå§‹åŒ–é¡ºåº)
    - [3.5.2. ä¸»åŠ¨å¼•ç”¨ï¼ˆåˆå§‹åŒ–æ—¶æœºï¼‰](#352-ä¸»åŠ¨å¼•ç”¨åˆå§‹åŒ–æ—¶æœº)
    - [3.5.3. è¢«åŠ¨å¼•ç”¨ï¼ˆä¸ä¼šåˆå§‹åŒ–ï¼‰](#353-è¢«åŠ¨å¼•ç”¨ä¸ä¼šåˆå§‹åŒ–)
    - [3.5.4. åˆå§‹åŒ–æ€»ç»“](#354-åˆå§‹åŒ–æ€»ç»“)
- [4. ç±»åŠ è½½å™¨](#4-ç±»åŠ è½½å™¨)
  - [4.1. ç±»åŠ è½½å™¨çš„åˆ†ç±»](#41-ç±»åŠ è½½å™¨çš„åˆ†ç±»)
    - [4.1.1. å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap Classloaderï¼‰](#411-å¯åŠ¨ç±»åŠ è½½å™¨bootstrap-classloader)
    - [4.1.2. æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension Classloaderï¼‰](#412-æ‰©å±•ç±»åŠ è½½å™¨extension-classloader)
    - [4.1.3. åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication Classloaderï¼‰](#413-åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨application-classloader)
    - [4.1.4. è‡ªå®šä¹‰ç±»åŠ è½½å™¨](#414-è‡ªå®šä¹‰ç±»åŠ è½½å™¨)
  - [4.2. ç±»åŠ è½½æ­¥éª¤](#42-ç±»åŠ è½½æ­¥éª¤)
  - [4.3. ç±»åŠ è½½æœºåˆ¶](#43-ç±»åŠ è½½æœºåˆ¶)
  - [4.4. åŒäº²å§”æ´¾](#44-åŒäº²å§”æ´¾)
    - [4.4.1. æ‰§è¡Œæµç¨‹](#441-æ‰§è¡Œæµç¨‹)
    - [4.4.2. åŒäº²å§”æ´¾çš„ä¼˜ç‚¹](#442-åŒäº²å§”æ´¾çš„ä¼˜ç‚¹)
    - [4.4.3. ç ´ååŒäº²å§”æ´¾](#443-ç ´ååŒäº²å§”æ´¾)

<!-- /TOC -->

# 1. ç±»æ–‡ä»¶ç»“æ„

```java
package com.company;
public class Test{
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
}
```

Test.java ä»£ç ç¼–è¯‘åï¼Œå¾—åˆ°çš„ Test.class æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
00000000: cafe babe 0000 0038 0022 0a00 0600 1409  .......8."......
00000010: 0015 0016 0800 170a 0018 0019 0700 1a07  ................
00000020: 001b 0100 063c 696e 6974 3e01 0003 2829  .....<init>...()
00000030: 5601 0004 436f 6465 0100 0f4c 696e 654e  V...Code...LineN
00000040: 756d 6265 7254 6162 6c65 0100 124c 6f63  umberTable...Loc
00000050: 616c 5661 7269 6162 6c65 5461 626c 6501  alVariableTable.
00000060: 0004 7468 6973 0100 124c 636f 6d2f 636f  ..this...Lcom/co
00000070: 6d70 616e 792f 5465 7374 3b01 0004 6d61  mpany/Test;...ma
00000080: 696e 0100 1628 5b4c 6a61 7661 2f6c 616e  in...([Ljava/lan
00000090: 672f 5374 7269 6e67 3b29 5601 0004 6172  g/String;)V...ar
000000a0: 6773 0100 135b 4c6a 6176 612f 6c61 6e67  gs...[Ljava/lang
000000b0: 2f53 7472 696e 673b 0100 0a53 6f75 7263  /String;...Sourc
000000c0: 6546 696c 6501 0009 5465 7374 2e6a 6176  eFile...Test.jav
000000d0: 610c 0007 0008 0700 1c0c 001d 001e 0100  a...............
000000e0: 0c48 656c 6c6f 2057 6f72 6c64 2107 001f  .Hello World!...
000000f0: 0c00 2000 2101 0010 636f 6d2f 636f 6d70  .. .!...com/comp
00000100: 616e 792f 5465 7374 0100 106a 6176 612f  any/Test...java/
00000110: 6c61 6e67 2f4f 626a 6563 7401 0010 6a61  lang/Object...ja
00000120: 7661 2f6c 616e 672f 5379 7374 656d 0100  va/lang/System..
00000130: 036f 7574 0100 154c 6a61 7661 2f69 6f2f  .out...Ljava/io/
00000140: 5072 696e 7453 7472 6561 6d3b 0100 136a  PrintStream;...j
00000150: 6176 612f 696f 2f50 7269 6e74 5374 7265  ava/io/PrintStre
00000160: 616d 0100 0770 7269 6e74 6c6e 0100 1528  am...println...(
00000170: 4c6a 6176 612f 6c61 6e67 2f53 7472 696e  Ljava/lang/Strin
00000180: 673b 2956 0021 0005 0006 0000 0000 0002  g;)V.!..........
00000190: 0001 0007 0008 0001 0009 0000 002f 0001  ............./..
000001a0: 0001 0000 0005 2ab7 0001 b100 0000 0200  ......*.........
000001b0: 0a00 0000 0600 0100 0000 0300 0b00 0000  ................
000001c0: 0c00 0100 0000 0500 0c00 0d00 0000 0900  ................
000001d0: 0e00 0f00 0100 0900 0000 3700 0200 0100  ..........7.....
000001e0: 0000 09b2 0002 1203 b600 04b1 0000 0002  ................
000001f0: 000a 0000 000a 0002 0000 0006 0008 0007  ................
00000200: 000b 0000 000c 0001 0000 0009 0010 0011  ................
00000210: 0000 0001 0012 0000 0002 0013 0a         .............
```

æ ¹æ® JVM è§„èŒƒï¼Œclass çš„æ–‡ä»¶ç»“æ„ï¼š

| ç±»å‹            | åç§°                | æ•°é‡                     |
| -------------- | ------------------- | ----------------------- |
| u4             | magic               | 1                       |
| u2             | minor_version       | 1                       |
| u2             | major_version       | 1                       |
| u2             | constant_pool_count | 1                       |
| cp_info        | constant_pool       | constant_pool_count - 1 |
| u2             | access_flags        | 1                       |
| u2             | this_class          | 1                       |
| u2             | super_class         | 1                       |
| u2             | interfaces_count    | 1                       |
| u2             | interfaces          | interfaces_count        |
| u2             | fields_count        | 1                       |
| field_info     | fields              | fields_count            |
| u2             | methods_count       | 1                       |
| method_info    | methods             | methods_count           |
| u2             | attributes_count    | 1                       |
| attribute_info | attributes          | attributes_count        |

## 1.1. é­”æ•°

**ã€magicã€‘**ï¼šé­”æ•°ï¼ˆç¬¬1~4å­—èŠ‚ï¼‰ã€‚

å”¯ä¸€ä½œç”¨æ˜¯åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªèƒ½è¢«è™šæ‹Ÿæœºæ¥å—çš„ Class æ–‡ä»¶ã€‚å€¼å›ºå®šä¸º `0xcafebabe`ã€‚

>  00000000: **cafe babe** 0000 0038 0022 0a00 0600 1409  .......8."......

## 1.2. æ–‡ä»¶ç‰ˆæœ¬

**ã€minor_versionã€‘**ï¼šå‰¯ç‰ˆæœ¬å·ï¼ˆç¬¬5~6å­—èŠ‚ï¼‰ã€‚

**ã€major_versionã€‘**ï¼šä¸»ç‰ˆæœ¬å·ï¼ˆç¬¬7~8å­—èŠ‚ï¼‰ã€‚

ä¸»å‰¯ç‰ˆæœ¬å·å…±åŒæ„æˆäº† Class æ–‡ä»¶çš„æ ¼å¼ç‰ˆæœ¬å·ï¼Œé«˜ç‰ˆæœ¬çš„è™šæ‹Ÿæœºæ”¯æŒä½ç‰ˆæœ¬çš„ç¼–è¯‘å™¨ç¼–è¯‘çš„ Class æ–‡ä»¶ç»“æ„ï¼Œåä¹‹åˆ™ä¸è¡Œã€‚

>  00000000: cafe babe **0000 0038** 0022 0a00 0600 1409  .......8."......

## 1.3. å¸¸é‡æ± 

**ã€constant_pool_countã€‘**ï¼šå¸¸é‡æ± è®¡æ•°å™¨ï¼ˆç¬¬8~9å­—èŠ‚ï¼‰ï¼Œå€¼ç­‰äº constant_pool è¡¨ä¸­çš„æˆå‘˜æ•°åŠ  1ã€‚

> 00000000: cafe babe 0000 0038 **0022** 0a00 0600 1409  .......8."......

`0022` åè¿›åˆ¶ä¸º34ï¼Œè¡¨ç¤ºå¸¸é‡æ± æœ‰#1~#33é¡¹ï¼Œ#0ä¸ºç©ºã€‚

**ã€constant_poolã€‘**ï¼šå¸¸é‡æ± ã€‚

 è¡¨çš„ç´¢å¼•å€¼åªæœ‰åœ¨å¤§äº 0 ä¸”å°äº constant_pool_count æ—¶æ‰ä¼šè¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„ã€‚ï¼ˆ0 è¡¨ç¤ºä¸å¼•ç”¨å¸¸é‡æ± çš„ä»»ä¸€é¡¹ï¼‰

| å¸¸é‡ç±»å‹                     | å€¼  |
| --------------------------- | --- |
| CONSTANT_Class              | 7   |
| CONSTANT_Fieldref           | 9   |
| CONSTANT_Methodref          | 10  |
| CONSTANT_InterfaceMethodref | 11  |
| CONSTANT_String             | 8   |
| CONSTANT_Integer            | 3   |
| CONSTANT_Float              | 4   |
| CONSTANT_Long               | 5   |
| CONSTANT_Double             | 6   |
| CONSTANT_NameAndType        | 12  |
| CONSTANT_Utf8               | 1   |
| CONSTANT_MethodHandle       | 15  |
| CONSTANT_MethodType         | 16  |
| CONSTANT_InvokeDynamic      | 18  |

>  00000000: cafe babe 0000 0038 0022 **0a00 0600 14**09  .......8."......

ç¬¬#1é¡¹ï¼š`0a` è¡¨ç¤º Method ä¿¡æ¯ï¼Œ`00 06` ï¼ˆ6ï¼‰å’Œ `00 14` ï¼ˆ20ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#6å’Œ#20é¡¹æ¥è·å¾—è¿™ä¸ªæ–¹æ³•çš„**æ‰€å±ç±»**å’Œ**æ–¹æ³•å**ã€‚

---

> 00000000: cafe babe 0000 0038 0022 0a00 0600 14**09**  .......8."......
>
> 00000010: **0015 0016** 0800 170a 0018 0019 0700 1a07  ................

ç¬¬#2é¡¹ï¼š`09` è¡¨ç¤º Field ä¿¡æ¯ï¼Œ`00 15` ï¼ˆ21ï¼‰å’Œ `00 16` ï¼ˆ22ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#21å’Œ#22é¡¹æ¥è·å¾—è¿™ä¸ªæˆå‘˜å˜é‡çš„**æ‰€å±ç±»**å’Œ**æˆå‘˜å˜é‡å**ã€‚

---

> 00000010: 0015 0016 **0800 17**0a 0018 0019 0700 1a07  ................

ç¬¬#3é¡¹ï¼š`08` è¡¨ç¤º String ä¿¡æ¯ï¼Œ`00 17` ï¼ˆ23ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#23é¡¹ã€‚

---

>  00000010: 0015 0016 0800 17**0a 0018 0019** 0700 1a07  ................

ç¬¬#4é¡¹ï¼š`0a` è¡¨ç¤º Method ä¿¡æ¯ï¼Œ`00 18` ï¼ˆ20ï¼‰å’Œ `00 19` ï¼ˆ21ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#20å’Œ#21é¡¹æ¥è·å¾—è¿™ä¸ªæˆå‘˜å˜é‡çš„**æ‰€å±ç±»**å’Œ**æ–¹æ³•å**ã€‚

---

> 00000010: 0015 0016 0800 170a 0018 0019 **0700 1a**07  ................

ç¬¬#5é¡¹ï¼š`07` è¡¨ç¤º Class ä¿¡æ¯ï¼Œ`00 1a` ï¼ˆ26ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#26é¡¹ã€‚

---

> 00000010: 0015 0016 0800 170a 0018 0019 0700 1a**07**  ................
>
> 00000020: **001b** 0100 063c 696e 6974 3e01 0003 2829  .....<init>...()

ç¬¬#6é¡¹ï¼š`07` è¡¨ç¤º Class ä¿¡æ¯ï¼Œ`00 1b` ï¼ˆ27ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#27é¡¹ã€‚

---

> 00000020: 001b **0100 063c 696e 6974 3e**01 0003 2829  .....<init>...()

ç¬¬#7é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 06` ï¼ˆ6ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`3c 696e 6974 3e` æ˜¯å­—ç¬¦ä¸² `<init>`ã€‚

---

> 00000020: 001b 0100 063c 696e 6974 3e**01 0003 2829 ** .....<init>...()
>
> 00000030: **56**01 0004 436f 6465 0100 0f4c 696e 654e  V...Code...LineN

ç¬¬#8é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 03` ï¼ˆ3ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`2829 56` æ˜¯å­—ç¬¦ä¸² `()V` ï¼Œè¡¨ç¤ºæ— å‚æ— è¿”å›å€¼ã€‚

---

> 00000030: 56**01 0004 436f 6465** 0100 0f4c 696e 654e  V...Code...LineN

ç¬¬#9é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 04` ï¼ˆ4ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`436f 6465` æ˜¯å­—ç¬¦ä¸² `Code` ã€‚

---

> 00000030: 5601 0004 436f 6465 **0100 0f4c 696e 654e**  V...Code...LineN
>
> 00000040: **756d 6265 7254 6162 6c65** 0100 124c 6f63  umberTable...Loc

ç¬¬#10é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 0f` ï¼ˆ15ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`4c 696e 654e 756d 6265 7254 6162 6c65` æ˜¯å­—ç¬¦ä¸² `LineNumberTable` ã€‚

---

> 00000040: 756d 6265 7254 6162 6c65 **0100 124c 6f63**  umberTable...Loc
>
> 00000050: **616c 5661 7269 6162 6c65 5461 626c 65**01  alVariableTable.

ç¬¬#11é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 12` ï¼ˆ18ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`4c 6f63 616c 5661 7269 6162 6c65 5461 626c 65` æ˜¯å­—ç¬¦ä¸² `LocalVariableTable` ã€‚

---

> 00000050: 616c 5661 7269 6162 6c65 5461 626c 65**01**  alVariableTable.
>
> 00000060: **0004 7468 6973** 0100 124c 636f 6d2f 636f  ..this...Lcom/co

ç¬¬#12é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 04` ï¼ˆ4ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`7468 6973` æ˜¯å­—ç¬¦ä¸² `this` ã€‚

---

> 00000060: 0004 7468 6973 **0100 124c 636f 6d2f 636f**  ..this...Lcom/co
>
> 00000070: **6d70 616e 792f 5465 7374 3b**01 0004 6d61  mpany/Test;...ma

ç¬¬#13é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 12` ï¼ˆ18ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`4c 636f 6d2f 636f 6d70 616e 792f 5465 7374 3b` æ˜¯å­—ç¬¦ä¸² `Lcom/company/Test;` ã€‚

---

> 00000070: 6d70 616e 792f 5465 7374 3b**01 0004 6d61**  mpany/Test;...ma
>
> 00000080: **696e** 0100 1628 5b4c 6a61 7661 2f6c 616e  in...([Ljava/lan

ç¬¬#14é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 04` ï¼ˆ4ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`6d61 696e` æ˜¯å­—ç¬¦ä¸² `main` ã€‚

---

> 00000080: 696e **0100 1628 5b4c 6a61 7661 2f6c 616e**  in...([Ljava/lan
>
> 00000090: **672f 5374 7269 6e67 3b29 56**01 0004 6172  g/String;)V...ar

ç¬¬#15é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 16` ï¼ˆ22ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`28 5b4c 6a61 7661 2f6c 616e 672f 5374 7269 6e67 3b29 56` æ˜¯å­—ç¬¦ä¸² `([Ljava/lang/String;)V` ï¼Œå…¶å®å°±æ˜¯å‚æ•°ä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ— è¿”å›å€¼ã€‚

---

> 00000090: 672f 5374 7269 6e67 3b29 56**01 0004 6172**  g/String;)V...ar
>
> 000000a0: **6773** 0100 135b 4c6a 6176 612f 6c61 6e67  gs...[Ljava/lang

ç¬¬#16é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 04` ï¼ˆ4ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`6172 6773` æ˜¯å­—ç¬¦ä¸² `args` ã€‚

---

> 000000a0: 6773 **0100 135b 4c6a 6176 612f 6c61 6e67**  gs...[Ljava/lang
>
> 000000b0: **2f53 7472 696e 673b** 0100 0a53 6f75 7263  /String;...Sourc

ç¬¬#17é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 13` ï¼ˆ19ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`5b 4c6a 6176 612f 6c61 6e67 2f53 7472 696e 673b` æ˜¯å­—ç¬¦ä¸² `[Ljava/lang/String;` ã€‚

---

> 000000b0: 2f53 7472 696e 673b **0100 0a53 6f75 7263**  /String;...Sourc
>
> 000000c0: **6546 696c 65**01 0009 5465 7374 2e6a 6176  eFile...Test.jav

ç¬¬#18é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 0a` ï¼ˆ10ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`53 6f75 7263 6546 696c 65` æ˜¯å­—ç¬¦ä¸² `SourceFile` ã€‚

---

> 000000c0: 6546 696c 65**01 0009 5465 7374 2e6a 6176**  eFile...Test.jav
>
> 000000d0: **61**0c 0007 0008 0700 1c0c 001d 001e 0100  a...............

ç¬¬#19é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 09` ï¼ˆ9ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`5465 7374 2e6a 6176 61` æ˜¯å­—ç¬¦ä¸² `Test.java` ã€‚

---

> 000000d0: 61**0c 0007 0008** 0700 1c0c 001d 001e 0100  a...............

ç¬¬#20é¡¹ï¼š`0c` è¡¨ç¤º NameAndType ä¿¡æ¯ï¼Œ`00 07` ï¼ˆ7ï¼‰å’Œ `00 08` ï¼ˆ8ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#7å’Œ#8é¡¹ã€‚

---

> 000000d0: 610c 0007 0008 **0700 1c**0c 001d 001e 0100  a...............

ç¬¬#21é¡¹ï¼š`07` è¡¨ç¤º Class ä¿¡æ¯ï¼Œ`00 1c` ï¼ˆ30ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#30é¡¹ã€‚

---

> 000000d0: 610c 0007 0008 0700 1c**0c 001d 001e** 0100  a...............

ç¬¬#22é¡¹ï¼š`0c` è¡¨ç¤º NameAndType ä¿¡æ¯ï¼Œ`00 1d` ï¼ˆ29ï¼‰å’Œ `00 1e` ï¼ˆ30ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#29å’Œ#30é¡¹ã€‚

---

> 000000d0: 610c 0007 0008 0700 1c0c 001d 001e **0100**  a...............
>
> 000000e0: **0c48 656c 6c6f 2057 6f72 6c64 21**07 001f  .Hello World!...

ç¬¬#23é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 0c` ï¼ˆ12ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`48 656c 6c6f 2057 6f72 6c64 21` æ˜¯å­—ç¬¦ä¸² `Hello World!` ã€‚

---

> 000000e0: 0c48 656c 6c6f 2057 6f72 6c64 21**07 001f**  .Hello World!...

ç¬¬#24é¡¹ï¼š`07` è¡¨ç¤º Class ä¿¡æ¯ï¼Œ`00 1f` ï¼ˆ31ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#31é¡¹ã€‚

---

> 000000f0: **0c00 2000 21**01 0010 636f 6d2f 636f 6d70  .. .!...com/comp

ç¬¬#25é¡¹ï¼š`0c` è¡¨ç¤º NameAndType ä¿¡æ¯ï¼Œ`00 20` ï¼ˆ32ï¼‰å’Œ `00 21` ï¼ˆ33ï¼‰ï¼Œè¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± ä¸­#32å’Œ#33é¡¹ã€‚

---

> 000000f0: 0c00 2000 21**01 0010 636f 6d2f 636f 6d70**  .. .!...com/comp
>
> 00000100: **616e 792f 5465 7374** 0100 106a 6176 612f  any/Test...java/

ç¬¬#26é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 10` ï¼ˆ16ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`636f 6d2f 636f 6d70 616e 792f 5465 7374` æ˜¯å­—ç¬¦ä¸² `com/company/Test` ã€‚

---

> 00000100: 616e 792f 5465 7374 **0100 106a 6176 612f**  any/Test...java/
>
> 00000110: **6c61 6e67 2f4f 626a 6563 74**01 0010 6a61  lang/Object...ja

ç¬¬#27é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 10` ï¼ˆ16ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`6a 6176 612f 6c61 6e67 2f4f 626a 6563 74` æ˜¯å­—ç¬¦ä¸² `java/lang/Object` ã€‚

---

> 00000110: 6c61 6e67 2f4f 626a 6563 74**01 0010 6a61**  lang/Object...ja
> 
> 00000120: **7661 2f6c 616e 672f 5379 7374 656d** 0100  va/lang/System..

ç¬¬#28é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 10` ï¼ˆ16ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`6a61 7661 2f6c 616e 672f 5379 7374 656d` æ˜¯å­—ç¬¦ä¸² `java/lang/System` ã€‚

---

> 00000120: 7661 2f6c 616e 672f 5379 7374 656d **0100**  va/lang/System..
>
> 00000130: **036f 7574** 0100 154c 6a61 7661 2f69 6f2f  .out...Ljava/io/

ç¬¬#29é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 03` ï¼ˆ3ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`6f 7574` æ˜¯å­—ç¬¦ä¸² `out` ã€‚

---

> 00000130: 036f 7574 **0100 154c 6a61 7661 2f69 6f2f**  .out...Ljava/io/
>
> 00000140: **5072 696e 7453 7472 6561 6d3b** 0100 136a  PrintStream;...j

ç¬¬#30é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 15` ï¼ˆ21ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`4c 6a61 7661 2f69 6f2f 5072 696e 7453 7472 6561 6d3b` æ˜¯å­—ç¬¦ä¸² `Ljava/io/PrintStream;` ã€‚

---

> 00000140: 5072 696e 7453 7472 6561 6d3b **0100 136a**  PrintStream;...j
>
> 00000150: **6176 612f 696f 2f50 7269 6e74 5374 7265**  ava/io/PrintStre
>
> 00000160: **616d** 0100 0770 7269 6e74 6c6e 0100 1528  am...println...(

ç¬¬#31é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 13` ï¼ˆ19ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`6a 6176 612f 696f 2f50 7269 6e74 5374 7265 616d` æ˜¯å­—ç¬¦ä¸² `java/io/PrintStream` ã€‚

---

> 00000160: 616d **0100 0770 7269 6e74 6c6e** 0100 1528  am...println...(

ç¬¬#32é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 07` ï¼ˆ7ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`70 7269 6e74 6c6e` æ˜¯å­—ç¬¦ä¸² `println` ã€‚

---

> 00000160: 616d 0100 0770 7269 6e74 6c6e **0100 1528**  am...println...(
>
> 00000170: **4c6a 6176 612f 6c61 6e67 2f53 7472 696e**  Ljava/lang/Strin
>
> 00000180: **673b 2956** 0021 0005 0006 0000 0000 0002  g;)V.!..........

ç¬¬#33é¡¹ï¼š`01` è¡¨ç¤º Utf8 ä¸²ï¼Œ`00 15` ï¼ˆ21ï¼‰è¡¨ç¤ºé•¿åº¦ï¼Œ`28 4c6a 6176 612f 6c61 6e67 2f53 7472 696e 673b 2956` æ˜¯å­—ç¬¦ä¸² `(Ljava/lang/String;)V` ã€‚

## 1.4. è®¿é—®æ ‡è¯†ä¸ç»§æ‰¿ä¿¡æ¯

ç”¨äºè¯†åˆ«ä¸€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯ï¼š

| æ ‡è®°å         | å€¼     | å«ä¹‰                                                  |
| -------------- | ------ | ----------------------------------------------------- |
| ACC_PUBLIC     | 0x0001 | public ç±»ï¼Œå¯ä»¥è¢«åŒ…çš„ç±»å¤–è®¿é—®ã€‚                       |
| ACC_FINAL      | 0x0010 | final ç±»ï¼Œä¸å…è®¸æœ‰å­ç±»ã€‚                              |
| ACC_SUPER      | 0x0020 | å½“ç”¨åˆ° invokespecial æŒ‡ä»¤æ—¶ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†çš„çˆ¶ç±»æ–¹æ³•ã€‚ |
| ACC_INTERFACE  | 0x0200 | æ ‡è¯†å®šä¹‰çš„æ˜¯ interface è€Œä¸æ˜¯ classã€‚                 |
| ACC_ABSTRACT   | 0x0400 | abstract ç±»ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚                           |
| ACC_SYNTHETIC  | 0x1000 | æ ‡è¯†å¹¶é Java æºç ç”Ÿæˆçš„ä»£ç ã€‚                        |
| ACC_ANNOTATION | 0x2000 | æ ‡è¯†æ³¨è§£ç±»å‹                                          |
| ACC_ENUM       | 0x4000 | æ ‡è¯†æšä¸¾ç±»å‹                                          |

**ã€access_flagsã€‘**ï¼šåœ¨å¸¸é‡æ± ç»“æŸä¹‹åï¼Œç´§æ¥ç€çš„ä¸¤ä¸ªå­—èŠ‚ä»£è¡¨è®¿é—®æ ‡å¿—ã€‚

> 00000180: 673b 2956 **0021 0005 0006 0000** 0000 0002

`0021` è¡¨ç¤ºè¯¥ class æ˜¯ä¸€ä¸ª**ç±»**ï¼Œä¸”è®¿é—®æƒé™ä¸º **public**ã€‚

**ã€this_classã€‘**ï¼šç±»ç´¢å¼•ï¼Œç”¨äºç¡®å®šæœ¬ç±»çš„å…¨é™å®šåã€‚

`0005`ï¼ˆ5ï¼‰ è¡¨ç¤ºåœ¨å¸¸é‡æ± ä¸­#5ä»£è¡¨**æœ¬ç±»å…¨é™å®šå**ã€‚

**ã€super_classã€‘**ï¼šçˆ¶ç±»ç´¢å¼•ï¼Œç”¨äºç¡®å®šçˆ¶ç±»çš„å…¨é™å®šåã€‚

`0006`ï¼ˆ6ï¼‰ è¡¨ç¤ºåœ¨å¸¸é‡æ± ä¸­#6ä»£è¡¨**çˆ¶ç±»å…¨é™å®šå**ã€‚

**ã€interfaces_countã€‘**ï¼šæ¥å£æ•°é‡ã€‚

`0000` è¡¨ç¤ºæœ¬ç±»çš„æ¥å£æ•°é‡ï¼ˆæ•°é‡ä¸º0ï¼‰ã€‚

**ã€interfacesã€‘**ï¼šæ¥å£ç´¢å¼•é›†åˆï¼Œæ¥å£åˆ—è¡¨ã€‚

## 1.5. å­—æ®µä¿¡æ¯

**ã€fields_countã€‘ï¼š**æ¥å£æˆ–ç±»ä¸­å£°æ˜çš„å˜é‡çš„æ•°é‡ã€‚

>  00000180: 673b 2956 0021 0005 0006 0000 **0000** 0002

`0000` è¡¨ç¤ºæœ¬ç±»çš„å­—æ®µæ•°é‡ï¼ˆæ•°é‡ä¸º0ï¼‰ã€‚

**ã€fieldsã€‘**ï¼šç”¨äºæè¿°æ¥å£æˆ–ç±»ä¸­å£°æ˜çš„å˜é‡ã€‚åŒ…æ‹¬é™æ€å˜é‡å’Œæˆå‘˜å˜é‡ï¼Œä½†ä¸åŒ…æ‹¬æ–¹æ³•å±€éƒ¨å˜é‡ã€‚

ä¸€ä¸ªå­—æ®µçš„ä¿¡æ¯åŒ…æ‹¬ï¼šä½œç”¨åŸŸï¼ˆpublicã€privateã€protectedï¼‰ã€æ˜¯å®ä¾‹å˜é‡è¿˜æ˜¯ç±»å˜é‡ï¼ˆstaticï¼‰ã€å¯å˜æ€§ï¼ˆfinalï¼‰ã€å¹¶å‘å¯è§æ€§ï¼ˆvolatileï¼‰ã€å¯å¦åºåˆ—åŒ–ï¼ˆtransientï¼‰ã€å­—æ®µæ•°æ®ç±»å‹ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡ã€æ•°ç»„ï¼‰ã€å­—æ®µåç§°ã€‚è¿™äº›ä¿®é¥°ç¬¦éƒ½æ˜¯å¸ƒå°”å€¼ï¼Œè¦ä¹ˆæœ‰ï¼Œè¦ä¹ˆæ²¡æœ‰ã€‚

å­—æ®µç»“æ„å¦‚ä¸‹ï¼š

```java
field_info {
    u2 access_flags;
    u2 name_index;
    u2 descriptor_index;
    u2 attributes_count;
    attribute_info attributes[attributes_count];
}
```

å­—æ®µ access_flags çš„å«ä¹‰ï¼š

| æ ‡è®°å        | å€¼     | è¯´æ˜                                |
| ------------- | ------ | ----------------------------------- |
| ACC_PUBLIC    | 0x0001 | publicï¼Œè¡¨ç¤ºå­—æ®µå¯ä»¥ä»ä»»ä½•åŒ…è®¿é—®ã€‚  |
| ACC_PRIVATE   | 0x0002 | privateï¼Œè¡¨ç¤ºå­—æ®µä»…èƒ½è¯¥ç±»è‡ªèº«è°ƒç”¨ã€‚ |
| ACC_PROTECTED | 0x0004 | protectedï¼Œè¡¨ç¤ºå­—æ®µå¯ä»¥è¢«å­ç±»è°ƒç”¨ã€‚ |
| ACC_STATIC    | 0x0008 | staticï¼Œè¡¨ç¤ºé™æ€å­—æ®µã€‚              |
| ACC_FINAL     | 0x0010 | finalï¼Œè¡¨ç¤ºå­—æ®µå®šä¹‰åå€¼æ— æ³•ä¿®æ”¹     |
| ACC_VOLATILE  | 0x0040 | volatileï¼Œè¡¨ç¤ºå­—æ®µæ˜¯æ˜“å˜çš„ã€‚        |
| ACC_TRANSIENT | 0x0080 | transientï¼Œè¡¨ç¤ºå­—æ®µä¸ä¼šè¢«åºåˆ—åŒ–     |
| ACC_SYNTHETIC | 0x1000 | è¡¨ç¤ºå­—æ®µç”±ç¼–è¯‘å™¨è‡ªåŠ¨äº§ç”Ÿã€‚          |
| ACC_ENUM      | 0x4000 | enumï¼Œè¡¨ç¤ºå­—æ®µä¸ºæšä¸¾ç±»å‹            |

æ•°æ®ç±»å‹ï¼š

| å­—ç¬¦         | ç±»å‹      | å«ä¹‰                       |
| ------------ | --------- | -------------------------- |
| B            | byte      | æœ‰ç¬¦å·å­—èŠ‚å‹æ•°             |
| C            | char      | Unicode å­—ç¬¦ï¼Œ UTF-16 ç¼–ç  |
| D            | double    | åŒç²¾åº¦æµ®ç‚¹æ•°               |
| F            | float     | å•ç²¾åº¦æµ®ç‚¹æ•°               |
| I            | int       | æ•´å‹æ•°                     |
| J            | long      | é•¿æ•´æ•°                     |
| S            | short     | æœ‰ç¬¦å·çŸ­æ•´æ•°               |
| Z            | boolean   | å¸ƒå°”å€¼ true/false          |
| L Classname; | reference | ä¸€ä¸ªåä¸º Classname çš„å®ä¾‹  |
| [            | reference | ä¸€ä¸ªä¸€ç»´æ•°ç»„               |

- å¯¹äºæ•°ç»„ç±»å‹ï¼Œæ¯ä¸€ä¸ªç»´åº¦ç”¨ä¸€ä¸ªå‰ç½®çš„ `[` å­—ç¬¦æ¥æè¿°ï¼Œå¦‚å®šä¹‰ä¸ª `int[][]` ç±»å‹çš„äºŒç»´æ•°ç»„ï¼Œè®°å½•ä¸ºï¼š`[[I`ã€‚
- ç”¨æè¿°ç¬¦æ¥æè¿°æ–¹æ³•æ—¶ï¼ŒæŒ‰ç…§å…ˆå‚æ•°åˆ—è¡¨åè¿”å›å€¼çš„é¡ºåºæè¿°ã€‚å‚æ•°è£‚å˜æŒ‰ç…§å‚æ•°é¡ºåºæ”¾åœ¨ `()` å†…ï¼Œå¦‚æ–¹æ³• `void login()` æè¿°ç¬¦ä¸º `()V`ï¼Œæ–¹æ³• `java.lang.String toString()` çš„æè¿°ç¬¦ä¸º `()Ljava.lang.String`ã€‚

## 1.6. æ–¹æ³•ä¿¡æ¯

å¦‚æœå­ç±»æ²¡æœ‰è¦†å†™çˆ¶ç±»æ–¹æ³•ï¼Œåˆ™æ–¹æ³•åˆ—è¡¨ä¸­å°±ä¸ä¼šæœ‰çˆ¶ç±»æ–¹æ³•ã€‚ä½†ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ·»åŠ çš„æ–¹æ³•ï¼ˆç±»æ„é€ å™¨ `<clinit>` å’Œå®ä¾‹æ„é€ å™¨ `<init>` ï¼‰å°±æœ‰å¯èƒ½ä¼šå‡ºç°ã€‚

**ã€methods_countã€‘**ï¼šæ–¹æ³•æ•°é‡ã€‚

>  00000180: 673b 2956 0021 0005 0006 0000 0000 **0002**

`0002` è¡¨ç¤ºæœ¬ç±»çš„æ–¹æ³•æ•°é‡ï¼ˆæ•°é‡ä¸º2ï¼‰ï¼Œé»˜è®¤æ„é€ æ–¹æ³•ï¼Œå’Œ `main` æ–¹æ³•ã€‚

**ã€methodsã€‘**ï¼šæ–¹æ³•åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªæ–¹æ³•ä¿¡æ¯åˆç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆã€‚

```
method_info {
    u2 access_flags;
    u2 name_index;
    u2 descriptor_index;
    u2 attributes_count;
    attribute_info attributes[attributes_count];
}
```

æ–¹æ³• access_flags çš„å«ä¹‰ï¼š

| æ ‡è®°å           | å€¼     | è¯´æ˜                                   |
| ---------------- | ------ | -------------------------------------- |
| ACC_PUBLIC       | 0x0001 | publicï¼Œæ–¹æ³•å¯ä»¥ä»åŒ…å¤–è®¿é—®             |
| ACC_PRIVATE      | 0x0002 | privateï¼Œæ–¹æ³•åªèƒ½æœ¬ç±»ä¸­è®¿é—®            |
| ACC_PROTECTED    | 0x0004 | protectedï¼Œæ–¹æ³•åœ¨è‡ªèº«å’Œå­ç±»å¯ä»¥è®¿é—®    |
| ACC_STATIC       | 0x0008 | staticï¼Œé™æ€æ–¹æ³•                       |
| ACC_FINAL        | 0x0010 | finalï¼Œæ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼ˆè¦†ç›–ï¼‰          |
| ACC_SYNCHRONIZED | 0x0020 | synchronizedï¼Œæ–¹æ³•ç”±ç®¡ç¨‹åŒæ­¥           |
| ACC_BRIDGE       | 0x0040 | bridgeï¼Œæ–¹æ³•ç”±ç¼–è¯‘å™¨äº§ç”Ÿ               |
| ACC_VARARGS      | 0x0080 | è¡¨ç¤ºæ–¹æ³•å¸¦æœ‰å˜é•¿å‚æ•°                   |
| ACC_NATIVE       | 0x0100 | nativeï¼Œæ–¹æ³•å¼•ç”¨é java è¯­è¨€çš„æœ¬åœ°æ–¹æ³• |
| ACC_ABSTRACT     | 0x0400 | abstractï¼Œæ–¹æ³•æ²¡æœ‰å…·ä½“å®ç°             |
| ACC_STRICT       | 0x0800 | strictfpï¼Œæ–¹æ³•ä½¿ç”¨ FP-strict æµ®ç‚¹æ ¼å¼  |
| ACC_SYNTHETIC    | 0x1000 | æ–¹æ³•åœ¨æºæ–‡ä»¶ä¸­ä¸å‡ºç°ï¼Œç”±ç¼–è¯‘å™¨äº§ç”Ÿ     |

**ã€`<init>` æ„é€ æ–¹æ³•ã€‘**

> 00000190: **0001** 0007 0008 0001 0009 0000 002f 0001  ............./..

`0001` è¡¨ç¤ºæ–¹æ³•çš„è®¿é—®ä¿®é¥°ä¸º `public`ã€‚

>  00000190: 0001 **0007** 0008 0001 0009 0000 002f 0001  ............./..

`0007` ï¼ˆ7ï¼‰è¡¨ç¤ºæ–¹æ³•çš„åç§°å¼•ç”¨äº†å¸¸é‡æ± ä¸­#7ã€‚

>  00000190: 0001 0007 **0008** 0001 0009 0000 002f 0001  ............./..

`0008` ï¼ˆ8ï¼‰è¡¨ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯å¼•ç”¨äº†å¸¸é‡æ± ä¸­#8ã€‚

>  00000190: 0001 0007 0008 **0001** 0009 0000 002f 0001  ............./..

`0001` ï¼ˆ1ï¼‰è¡¨ç¤ºæ–¹æ³•çš„å±æ€§æ•°é‡ä¸º1ã€‚

> 00000190: 0001 0007 0008 0001 **0009 0000 002f 0001**  ............./..
>
> 000001a0: **0001 0000 0005 2ab7 0001 b100 0000 0200**  ......*.........
>
> 000001b0: **0a00 0000 0600 0100 0000 0300 0b00 0000**  ................
>
> 000001c0: **0c00 0100 0000 0500 0c00 0d00 00**00 0900  ................

è¿™æ®µä»£è¡¨æ–¹æ³•çš„å±æ€§ä¿¡æ¯ï¼š

- `0009` ï¼ˆ9ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #9é¡¹ï¼Œå³ `Code` å±æ€§ã€‚
- `0000 002f` ï¼ˆ47ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯47ã€‚
- `0001` è¡¨ç¤ºæ“ä½œæ•°æ ˆæœ€å¤§æ·±åº¦ã€‚
- `0001` è¡¨ç¤ºå±€éƒ¨å˜é‡è¡¨æœ€å¤§æ§½æ•°ï¼ˆslotï¼‰ã€‚
- `0000 0005` ï¼ˆ5ï¼‰è¡¨ç¤ºå­—èŠ‚ç é•¿åº¦æ˜¯5ã€‚
- `2ab7 0001 b1` æ˜¯æ–¹æ³•å†…çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚
- `00 0000 02` ï¼ˆ2ï¼‰è¡¨ç¤ºæ–¹æ³•ç»†èŠ‚å±æ€§æ•°é‡æ˜¯2ã€‚
- `00 0a` ï¼ˆ10ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #10é¡¹ï¼Œå³ `LineNumberTable ` å±æ€§ã€‚
  - `00 0000 06` ï¼ˆ6ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯6ã€‚
  - `00 01` ï¼ˆ1ï¼‰è¡¨ç¤º LineNumberTable çš„é•¿åº¦æ˜¯1ã€‚
  - `00 00` ï¼ˆ0ï¼‰è¡¨ç¤ºå­—èŠ‚ç è¡Œå·ä¸º0ï¼Œå¯¹åº” `00 03` ï¼ˆ3ï¼‰è¡¨ç¤º java æºç è¡Œå·ä¸º3ã€‚
- `00 0b` ï¼ˆ11ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #11é¡¹ï¼Œå³ `LocalVariableTable` å±æ€§ã€‚
  - `00 0000 0c` ï¼ˆ12ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯12ã€‚
  - `00 01` ï¼ˆ1ï¼‰è¡¨ç¤º `LocalVariableTable` çš„é•¿åº¦æ˜¯1ã€‚
  - `00 00` ï¼ˆ0ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼Œç›¸å¯¹äºå­—èŠ‚ç çš„åç§»é‡ã€‚
  - `00 05` ï¼ˆ5ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡è¦†ç›–çš„èŒƒå›´é•¿åº¦ä¸º5ã€‚
  - `00 0c` ï¼ˆ12ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡åç§°ï¼Œå¼•ç”¨äº†å¸¸é‡æ± #12é¡¹ï¼Œå³ `this` ã€‚
  - `00 0d` ï¼ˆ13ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡çš„ç±»å‹ï¼Œå¼•ç”¨äº†å¸¸é‡æ± #13é¡¹ï¼Œå³ `Lcom/company/Test;` ã€‚
  - `00 00` ï¼ˆ0ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡å æœ‰çš„æ§½ä½ç¼–å·ï¼ˆslotï¼‰æ˜¯0ã€‚

**ã€`<mian>` ä¸»æ–¹æ³•ã€‘**

> 000001c0: 0c00 0100 0000 0500 0c00 0d00 00**00 09**00  ................

`00 09` è¡¨ç¤ºæ–¹æ³•çš„è®¿é—®ä¿®é¥°ä¸º `public static`ã€‚

> 000001c0: 0c00 0100 0000 0500 0c00 0d00 0000 09**00**  ................ 
>
> 000001d0: **0e**00 0f00 0100 0900 0000 3700 0200 0100  ..........7.....

`00 0e` ï¼ˆ14ï¼‰è¡¨ç¤ºæ–¹æ³•çš„åç§°å¼•ç”¨äº†å¸¸é‡æ± ä¸­#14ã€‚

> 000001d0: 0e**00 0f**00 0100 0900 0000 3700 0200 0100  ..........7.....

`00 0f` ï¼ˆ15ï¼‰è¡¨ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯å¼•ç”¨äº†å¸¸é‡æ± ä¸­#15ã€‚

> 000001d0: 0e00 0f**00 01**00 0900 0000 3700 0200 0100  ..........7.....

`0001` ï¼ˆ1ï¼‰è¡¨ç¤ºæ–¹æ³•çš„å±æ€§æ•°é‡ä¸º1ã€‚

> 000001d0: 0e00 0f00 01**00 0900 0000 3700 0200 0100**  ..........7.....
>
> 000001e0: **0000 09b2 0002 1203 b600 04b1 0000 0002**  ................ 
>
> 000001f0: **000a 0000 000a 0002 0000 0006 0008 0007**  ................
>
> 00000200: **000b 0000 000c 0001 0000 0009 0010 0011**  ................
>
> 00000210: **0000** 0001 0012 0000 0002 0013 0a         .............

è¿™æ®µä»£è¡¨æ–¹æ³•çš„å±æ€§ä¿¡æ¯ï¼š

- `00 09` ï¼ˆ9ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #9é¡¹ï¼Œå³ `Code` å±æ€§ã€‚
- `00 0000 37` ï¼ˆ55ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯55ã€‚
- `00 02` è¡¨ç¤ºæ“ä½œæ•°æ ˆæœ€å¤§æ·±åº¦ã€‚
- `00 01` è¡¨ç¤ºå±€éƒ¨å˜é‡è¡¨æœ€å¤§æ§½æ•°ï¼ˆslotï¼‰ã€‚
- `00 0000 09` ï¼ˆ9ï¼‰è¡¨ç¤ºå­—èŠ‚ç é•¿åº¦æ˜¯9ã€‚
- `b2 0002 1203 b600 04b1` æ˜¯æ–¹æ³•å†…çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚
- `0000 0002` ï¼ˆ2ï¼‰è¡¨ç¤ºæ–¹æ³•ç»†èŠ‚å±æ€§æ•°é‡æ˜¯2ã€‚
- `000a` ï¼ˆ10ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #10é¡¹ï¼Œå³ `LineNumberTable ` å±æ€§ã€‚
  - `0000 000a` ï¼ˆ10ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯10ã€‚
  - `0002` ï¼ˆ2ï¼‰è¡¨ç¤º LineNumberTable çš„é•¿åº¦æ˜¯2ã€‚
  - `0000` ï¼ˆ0ï¼‰è¡¨ç¤ºå­—èŠ‚ç è¡Œå·ä¸º0ï¼Œå¯¹åº” `0006` ï¼ˆ6ï¼‰è¡¨ç¤º java æºç è¡Œå·ä¸º6ã€‚
  - `0008` ï¼ˆ8ï¼‰è¡¨ç¤ºå­—èŠ‚ç è¡Œå·ä¸º8ï¼Œå¯¹åº” `0007` ï¼ˆ7ï¼‰è¡¨ç¤º java æºç è¡Œå·ä¸º7ã€‚
- `000b` ï¼ˆ11ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #11é¡¹ï¼Œå³ `LocalVariableTable` å±æ€§ã€‚
  - `0000 000c` ï¼ˆ12ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯12ã€‚
  - `0001` ï¼ˆ1ï¼‰è¡¨ç¤º `LocalVariableTable` çš„é•¿åº¦æ˜¯1ã€‚
  - `0000` ï¼ˆ0ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼Œç›¸å¯¹äºå­—èŠ‚ç çš„åç§»é‡ã€‚
  - `0009` ï¼ˆ9ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡è¦†ç›–çš„èŒƒå›´é•¿åº¦ä¸º5ã€‚
  - `0010` ï¼ˆ16ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡åç§°ï¼Œå¼•ç”¨äº†å¸¸é‡æ± #16é¡¹ï¼Œå³ `args` ã€‚
  - `0011` ï¼ˆ17ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡çš„ç±»å‹ï¼Œå¼•ç”¨äº†å¸¸é‡æ± #17é¡¹ï¼Œå³ `[Ljava/lang/String;` ã€‚
  - `0000` ï¼ˆ0ï¼‰è¡¨ç¤ºå±€éƒ¨å˜é‡å æœ‰çš„æ§½ä½ç¼–å·ï¼ˆslotï¼‰æ˜¯0ã€‚

## 1.7. å±æ€§ä¿¡æ¯

 Class æ–‡ä»¶ã€å­—æ®µä¿¡æ¯ã€æ–¹æ³•ä¿¡æ¯ä¸­éƒ½å¯ä»¥æºå¸¦è‡ªå·±çš„å±æ€§ä¿¡æ¯ï¼Œä»¥ç”¨äºæè¿°æŸäº›åœºæ™¯ä¸“æœ‰çš„ä¿¡æ¯ã€‚ Java è™šæ‹Ÿæœºè¿è¡Œæ—¶ä¼šå¿½ç•¥æ‰å®ƒä¸è®¤è¯†çš„å±æ€§ã€‚

**ã€attributes_countã€‘**ï¼šé™„åŠ å±æ€§çš„æ•°é‡ã€‚

> 00000210: 0000 **0001** 0012 0000 0002 0013 0a         .............

`0001` ï¼ˆ1ï¼‰è¡¨ç¤ºé™„åŠ å±æ€§çš„æ•°é‡æ˜¯1ã€‚

**ã€attributesã€‘**ï¼šå±æ€§åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå±æ€§ä¿¡æ¯åˆç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆã€‚

å±æ€§çš„é€šç”¨æ ¼å¼ï¼š

```
attribute_info {
    u2 attribute_name_index;   //å±æ€§åç´¢å¼•
    u4 attribute_length;       //å±æ€§é•¿åº¦
    u1 info[attribute_length]; //å±æ€§çš„å…·ä½“å†…å®¹
}
```

> 00000210: 0000 0001 **0012** 0000 0002 0013 0a         .............

`0012` ï¼ˆ18ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #18é¡¹ï¼Œå³ `SourceFile ` ã€‚

> 00000210: 0000 0001 0012 **0000 0002** 0013 0a         .............

`0000 0002` ï¼ˆ2ï¼‰è¡¨ç¤ºæ­¤å±æ€§çš„é•¿åº¦æ˜¯2ã€‚

> 00000210: 0000 0001 0012 0000 0002 **0013** 0a         .............

`0013` ï¼ˆ19ï¼‰è¡¨ç¤ºå¼•ç”¨äº†å¸¸é‡æ± #19é¡¹ï¼Œå³ `Test.java ` ã€‚

---

<br/>

# 2. å­—èŠ‚ç æŒ‡ä»¤

## 2.1. å…¥é—¨

```java
public com.company.Test();
```

æ„é€ æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ä¸º `2ab7 0001 b1` 

- `2a` ï¼š`aload_0`ï¼ŒåŠ è½½ slot 0 çš„å±€éƒ¨å˜é‡ï¼Œå³ `this` ã€‚
- `b7` ï¼š`invokespecial`ï¼Œé¢„å¤‡è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå³ `.` ã€‚
- `0001` ï¼šå¼•ç”¨å¸¸é‡æ± #1é¡¹ï¼Œå³ `Method java/lang/Object."<init>":()V` ï¼Œè¡¨ç¤º `Object` ç±»çš„æ„é€ æ–¹æ³•ã€‚
- `b1` ï¼š`return`ï¼Œè¡¨ç¤ºæ–¹æ³•è¿”å›ã€‚

```
public static void main(java/lang/String[] args);
```

ä¸»æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ä¸º `b2 0002 1203 b600 04b1`

- `b2` ï¼š`getstatic` ï¼ŒåŠ è½½é™æ€å˜é‡ã€‚
- `0002` ï¼šå¼•ç”¨å¸¸é‡æ± #2é¡¹ï¼Œå³ `Field java/lang/System.out:Ljava/io/PrintStream;` ã€‚
- `12` ï¼š`ldc` ï¼ŒåŠ è½½å‚æ•°ã€‚
- `03 ` ï¼šå¼•ç”¨å¸¸é‡æ± #3é¡¹ï¼Œå³ `String HelloWorld!` ã€‚
- `b6` ï¼š`invokespecial` ï¼Œé¢„å¤‡è°ƒç”¨æˆå‘˜æ–¹æ³•ï¼Œå³ `.` ã€‚
- `00 04` ï¼šå¼•ç”¨å¸¸é‡æ± #4é¡¹ï¼Œå³ `Method java/io/PrintStream.println:(Ljava/lang/String;)V` ã€‚

- `b1` ï¼š`return`ï¼Œè¡¨ç¤ºæ–¹æ³•è¿”å›ã€‚

## 2.2. Javap å·¥å…·

åŸå§‹ java ä»£ç ï¼š

```java
package com.company;

public class Test {
    public static void main(String[] args) {
        int a = 10;
        int b = Short.MAX_VALUE + 1;
        int c = a + b;
        System.out.println(c);
    }
}
```

ç¼–è¯‘åçš„ class ä»£ç ï¼Œå†ä½¿ç”¨JDK çš„ javap å·¥å…·åç¼–è¯‘ classæ–‡ä»¶ï¼š`javap -v Test.class `

```sh
Classfile /.../com/company/Test.class
  Last modified 2021å¹´2æœˆ23æ—¥; size 598 bytes
  MD5 checksum 0d028b42346027580fe220acb3a33c3f
  Compiled from "Test.java"
public class com.company.Test
  minor version: 0
  major version: 56
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #6          // com/company/Test
  super_class: #7         // java/lang/Object
  interfaces: 0, fields: 0, methods: 2, attributes: 1
Constant pool:
   #1 = Methodref          #7.#25         // java/lang/Object."<init>":()V
   #2 = Class              #26            // java/lang/Short
   #3 = Integer            32768
   #4 = Fieldref           #27.#28        // java/lang/System.out:Ljava/io/PrintStream;
   #5 = Methodref          #29.#30        // java/io/PrintStream.println:(I)V
   #6 = Class              #31            // com/company/Test
   #7 = Class              #32            // java/lang/Object
   #8 = Utf8               <init>
   #9 = Utf8               ()V
  #10 = Utf8               Code
  #11 = Utf8               LineNumberTable
  #12 = Utf8               LocalVariableTable
  #13 = Utf8               this
  #14 = Utf8               Lcom/company/Test;
  #15 = Utf8               main
  #16 = Utf8               ([Ljava/lang/String;)V
  #17 = Utf8               args
  #18 = Utf8               [Ljava/lang/String;
  #19 = Utf8               a
  #20 = Utf8               I
  #21 = Utf8               b
  #22 = Utf8               c
  #23 = Utf8               SourceFile
  #24 = Utf8               Test.java
  #25 = NameAndType        #8:#9          // "<init>":()V
  #26 = Utf8               java/lang/Short
  #27 = Class              #33            // java/lang/System
  #28 = NameAndType        #34:#35        // out:Ljava/io/PrintStream;
  #29 = Class              #36            // java/io/PrintStream
  #30 = NameAndType        #37:#38        // println:(I)V
  #31 = Utf8               com/company/Test
  #32 = Utf8               java/lang/Object
  #33 = Utf8               java/lang/System
  #34 = Utf8               out
  #35 = Utf8               Ljava/io/PrintStream;
  #36 = Utf8               java/io/PrintStream
  #37 = Utf8               println
  #38 = Utf8               (I)V
{
  public com.company.Test();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcom/company/Test;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=4, args_size=1
         0: bipush        10  // ã€æ•°å­—è¾ƒå°ï¼Œå°±å’Œå­—èŠ‚ç æŒ‡ä»¤åœ¨ä¸€èµ·ã€‘
         2: istore_1
         3: ldc           #3  // ã€int 32768 æ•°å­—è¾ƒå¤§ï¼Œå°±å­˜æ”¾åœ¨å¸¸é‡æ± ï¼Œ32768=32767+1ã€‘
         5: istore_2
         6: iload_1
         7: iload_2
         8: iadd
         9: istore_3
        10: getstatic     #4  // Field java/lang/System.out:Ljava/io/PrintStream;
        13: iload_3
        14: invokevirtual #5  // Method java/io/PrintStream.println:(I)V
        17: return
      LineNumberTable:
        line 5: 0
        line 6: 3
        line 7: 6
        line 8: 10
        line 9: 17
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      18     0  args   [Ljava/lang/String;
            3      15     1     a   I
            6      12     2     b   I
           10       8     3     c   I
}
SourceFile: "Test.java"
```

## 2.3. æ–¹æ³•æ‰§è¡Œæµç¨‹

Class åŠ è½½è¿‡ç¨‹ä¸­ï¼Œclass æ–‡ä»¶å¸¸é‡æ± ï¼ˆConstant poolï¼‰ä¼šè¿›å…¥**è¿è¡Œæ—¶å¸¸é‡æ± **ï¼Œæ–¹æ³•çš„ä»£ç ï¼ˆCodeï¼‰ä¼šè¿›å…¥**æ–¹æ³•åŒº**ã€‚

**ã€main æ–¹æ³•æ‰§è¡Œæµç¨‹ã€‘**

- ä¸»çº¿ç¨‹å¯åŠ¨ï¼šè°ƒç”¨ main æ–¹æ³•æ˜¯äº§ç”Ÿä¸€ä¸ªæ ˆå¸§ï¼ŒåŒ…å«**å±€éƒ¨å˜é‡è¡¨**ï¼ˆLocalVariableTableï¼‰å’Œ**æ“ä½œæ•°æ ˆ**ã€‚
- `bipush 10` ï¼šå°†ä¸€ä¸ª byte å‹å…¥æ“ä½œæ•°æ ˆï¼ˆä¼šè¡¥é½4ä¸ªå­—èŠ‚ï¼‰ï¼Œç±»ä¼¼çš„ï¼š`ldc` å°†ä¸€ä¸ª int å‹å…¥æ“ä½œæ•°æ ˆï¼›`ldc2_w` å°†ä¸€ä¸ª long å‹å…¥æ“ä½œæ•°æ ˆï¼ˆè¦åˆ†ä¸¤æ¬¡ï¼‰ã€‚
- `istore_1` ï¼šå°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 1ã€‚å³å¯¹ a èµ‹å€¼ï¼š`a = 10` ã€‚
- `ldc #3` ï¼šä»è¿è¡Œæ—¶å¸¸é‡æ± ä¸­åŠ è½½#3é¡¹çš„æ•°æ®åˆ°æ“ä½œæ•°æ ˆã€‚
- `istore_2` ï¼šå°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 2ã€‚å³å¯¹ b èµ‹å€¼ï¼š`b = 32768` ã€‚
- `iload_1` ï¼šä»å±€éƒ¨å˜é‡è¡¨çš„ slot 1 è¯»å–æ•°æ®ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‚å³è¯»å– a çš„å€¼ï¼š`10 ` ã€‚ 
- `iload_2` ï¼šä»å±€éƒ¨å˜é‡è¡¨çš„ slot 2 è¯»å–æ•°æ®ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‚å³è¯»å– b çš„å€¼ï¼š`32768` ã€‚ 
- `iadd` ï¼šå¼¹å‡ºæ“ä½œæ•°æ ˆä¸­çš„ä¸¤ä¸ªå˜é‡ï¼Œæ‰§è¡ŒåŠ æ³•è¿ç®—ï¼Œå¹¶æŠŠç»“æœï¼ˆ`32778`ï¼‰å‹å…¥æ“ä½œæ•°æ ˆã€‚
- `istore_3` ï¼šå°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 3ã€‚å³å¯¹ c èµ‹å€¼ï¼š`c = 32778` ã€‚
- `getstatic #4`  ï¼šä»è¿è¡Œæ—¶å¸¸é‡æ± #4é¡¹ä¸­æ‰¾åˆ°æˆå‘˜å˜é‡çš„å¼•ç”¨ï¼Œåœ¨ä»å †ä¸­æ ¹æ®å¼•ç”¨æ‰¾åˆ°å¯¹è±¡åœ°å€ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‚å³ `System.out` å¯¹è±¡ã€‚
- `iload_3` ï¼šä»å±€éƒ¨å˜é‡è¡¨çš„ slot 3 è¯»å–æ•°æ®ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‚å³è¯»å– c çš„å€¼ï¼š`32778` ã€‚ 
- `invokevirtual #5` ï¼šä»è¿è¡Œæ—¶å¸¸é‡æ± #5é¡¹ä¸­æ‰¾åˆ°æ–¹æ³•ï¼Œå¹¶å®šä½åˆ°æ–¹æ³•åŒºä¸­çš„è¯¥æ–¹æ³•ï¼Œåˆ›å»ºæ–°çš„æ ˆå¸§ï¼Œå¹¶ä¼ é€’å‚æ•°ï¼Œå³ `System.out.println(c);` ã€‚
- `return` ï¼šæ–¹æ³•è¿è¡Œå®Œæ¯•ï¼Œå¼¹å‡ºæ ˆå¸§ï¼Œç¨‹åºç»“æŸã€‚

## 2.4. æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤

| æŒ‡ä»¤ç   | æ“ä½œç ï¼ˆåŠ©è®°ç¬¦ï¼‰    | æè¿°                                |
| ------ | ---------------- | ----------------------------------- |
| 0x99   | ifeq             | è‹¥æ ˆé¡¶ int ç±»å‹å€¼ä¸º 0 åˆ™è·³è½¬ã€‚          |
| 0x9a   | ifne             | è‹¥æ ˆé¡¶ int ç±»å‹å€¼ä¸ä¸º 0 åˆ™è·³è½¬ã€‚        |
| 0x9b   | iflt             | è‹¥æ ˆé¡¶ int ç±»å‹å€¼å°äº 0 åˆ™è·³è½¬ã€‚        |
| 0x9e   | ifle             | è‹¥æ ˆé¡¶ int ç±»å‹å€¼å°äºç­‰äº 0 åˆ™è·³è½¬ã€‚     |
| 0x9d   | ifgt             | è‹¥æ ˆé¡¶ int ç±»å‹å€¼å¤§äº 0 åˆ™è·³è½¬ã€‚        |
| 0x9c   | ifge             | è‹¥æ ˆé¡¶ int ç±»å‹å€¼å¤§äºç­‰äº 0 åˆ™è·³è½¬ã€‚     |
| 0x9f   | if_icmpeq        | è‹¥æ ˆé¡¶ä¸¤ int ç±»å‹å€¼ç›¸ç­‰åˆ™è·³è½¬ã€‚          |
| 0xa0   | if_icmpne        | è‹¥æ ˆé¡¶ä¸¤ int ç±»å‹å€¼ä¸ç›¸ç­‰åˆ™è·³è½¬ã€‚        |
| 0xa1   | if_icmplt        | è‹¥æ ˆé¡¶ä¸¤ int ç±»å‹å€¼å‰å°äºååˆ™è·³è½¬ã€‚      |
| 0xa4   | if_icmple        | è‹¥æ ˆé¡¶ä¸¤ int ç±»å‹å€¼å‰å°äºç­‰äºååˆ™è·³è½¬ã€‚   |
| 0xa3   | if_icmpgt        | è‹¥æ ˆé¡¶ä¸¤ int ç±»å‹å€¼å‰å¤§äºååˆ™è·³è½¬ã€‚      |
| 0xa2   | if_icmpge        | è‹¥æ ˆé¡¶ä¸¤ int ç±»å‹å€¼å‰å¤§äºç­‰äºååˆ™è·³è½¬ã€‚   |
| 0xa5   | if_acmpeq        | è‹¥æ ˆé¡¶ä¸¤å¼•ç”¨ç±»å‹å€¼ç›¸ç­‰åˆ™è·³è½¬ã€‚           |
| 0xa6   | if_acmpne        | è‹¥æ ˆé¡¶ä¸¤å¼•ç”¨ç±»å‹å€¼ä¸ç›¸ç­‰åˆ™è·³è½¬ã€‚         |

java æºç ï¼š

```java
package com.company;

public class Test {
    public static void main(String[] args) {
        int a = 0;
        if (a == 0) {
            a = 10;
        } else {
            a = 20;
        }
    }
}
```

class å­—èŠ‚ç æŒ‡ä»¤éƒ¨åˆ†ï¼š

```shell
 0: iconst_0			// ã€åˆ›å»ºä¸€ä¸ªå¸¸é‡0ã€‚æ³¨æ„-1~5çš„æ•°å­—å°±åˆ›å»ºå¸¸é‡ã€‘
 1: istore_1			// ã€å­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
 2: iload_1				// ã€è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‘
 3: ifne          12	// ã€æ¯”è¾ƒæ ˆé¡¶å…ƒç´ ï¼Œå¦‚æœä¸ä¸º0ï¼Œåˆ™è·³è½¬æ‰§è¡Œç¬¬12è¡ŒæŒ‡ä»¤ã€‘
 6: bipush        10	// ã€æŠŠ10å‹å…¥æ“ä½œæ•°æ ˆã€‘
 8: istore_1			// ã€æŠŠæ ˆé¡¶å…ƒç´ 10ï¼Œå­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
 9: goto          15	// ã€è·³è½¬æ‰§è¡Œç¬¬15è¡ŒæŒ‡ä»¤ã€‘
12: bipush        20	// ã€æŠŠ20å‹å…¥æ“ä½œæ•°æ ˆã€‘
14: istore_1			// ã€æŠŠæ ˆé¡¶å…ƒç´ 20ï¼Œå­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
15: return				// ã€ç¨‹åºè¿è¡Œç»“æŸã€‘
```

## 2.5. å¾ªç¯æ§åˆ¶æŒ‡ä»¤

å¾ªç¯æ§åˆ¶æŒ‡ä»¤å°±æ˜¯**æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤** + **æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤**ç»„æˆã€‚

java æºç ï¼š

```java
package com.company;

public class Test {
    public static void main(String[] args) {
        int a = 0;
        while (a < 0) {
            a++;
        }
    }
}
```

class å­—èŠ‚ç æŒ‡ä»¤éƒ¨åˆ†ï¼š

```shell
 0: iconst_0			// ã€åˆ›å»ºä¸€ä¸ªå¸¸é‡0ã€‚æ³¨æ„-1~5çš„æ•°å­—å°±åˆ›å»ºå¸¸é‡ã€‘
 1: istore_1			// ã€å­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
 2: iload_1				// ã€è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‘
 3: bipush        10	// ã€æŠŠ10å‹å…¥æ“ä½œæ•°æ ˆã€‘
 5: if_icmpge     14	// ã€æ¯”è¾ƒæ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå‰å¤§äºç­‰äºåï¼Œåˆ™è·³è½¬æ‰§è¡Œç¬¬14è¡ŒæŒ‡ä»¤ã€‘
 8: iinc          1, 1	// ã€è‡ªå¢ã€‚å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å…ƒç´ ç›´æ¥å¢åŠ 1ã€‘
11: goto          2		// ã€è·³è½¬æ‰§è¡Œç¬¬2è¡ŒæŒ‡ä»¤ï¼Œäº§ç”Ÿå¾ªç¯ã€‘
14: return				// ã€ç¨‹åºè¿è¡Œç»“æŸã€‘
```

## 2.6. ä¸ºä»€ä¹ˆ x=x++ æ— æ•ˆ

```java
package com.company;

public class Test {
    public static void main(String[] args) {
        int x = 0;
        x = x++;
        System.out.println(x);	// æœ€ç»ˆx=0
    }
}
```

class å­—èŠ‚ç æŒ‡ä»¤éƒ¨åˆ†ï¼š

```shell
 0: iconst_0			// ã€åˆ›å»ºä¸€ä¸ªå¸¸é‡0ã€‚æ³¨æ„-1~5çš„æ•°å­—å°±åˆ›å»ºå¸¸é‡ã€‘
 1: istore_1			// ã€å­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
 2: iload_1				// ã€è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆã€‘
 3: iinc          1, 1	// ã€è‡ªå¢ã€‚å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å…ƒç´ ç›´æ¥å¢åŠ 1ã€‘
 6:	istore_1			// ã€æŠŠæ ˆé¡¶å…ƒç´ 0ï¼Œå­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
 7: return				// ã€ç¨‹åºè¿è¡Œç»“æŸã€‘
```

ç”±å­—èŠ‚ç æŒ‡ä»¤å¯ä»¥çœ‹å‡ºï¼Œ`x = x++` çš„è¿è¡Œæ­¥éª¤ä¸ºï¼š

1. å±€éƒ¨å˜é‡è¡¨`æ§½ä½1`å­˜æ”¾æ•°å­—`0`ã€‚ï¼ˆå³ `int x = 0;`ï¼‰
2. å±€éƒ¨å˜é‡è¡¨`æ§½ä½1`ä¸­çš„æ•°å­—å¤åˆ¶ä¸€ä»½åˆ°æ“ä½œæ•°æ ˆä¸­ã€‚ï¼ˆå³ `x = x++;` ï¼Œç­‰å·å³è¾¹çš„ `x` çš„è¯»å–è¿‡ç¨‹ï¼‰
3. å±€éƒ¨å˜é‡è¡¨`æ§½ä½1`å­˜æ”¾çš„æ•°å­—`0`è‡ªå¢ä¸º`1`ã€‚ï¼ˆå³ `++`ï¼Œé‡ç‚¹ï¼š`iinc` æŒ‡ä»¤æ˜¯ç›´æ¥ä¿®æ”¹å±€éƒ¨å˜é‡è¡¨ä¸­çš„å€¼ï¼‰
4. æ“ä½œæ•°æ ˆä¸­çš„æ•°å­—`0`å­˜æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨`æ§½ä½1`ã€‚ï¼ˆå³ `x = x++;` ä¸­çš„`=`èµ‹å€¼æ“ä½œï¼‰
   
ç»è¿‡ä»¥ä¸Š4ä¸ªæ­¥éª¤ï¼Œå±€éƒ¨å˜é‡è¡¨`æ§½ä½1`ä¸­çš„æ•°å­—ç”±`0`è‡ªå¢åˆ°`1`ä¹‹åï¼Œåˆè¢«è¦†ç›–æˆäº†`0`ï¼Œä½¿å¾—æœ€ç»ˆè¯»å–çš„æ—¶å€™ï¼Œè¿˜æ˜¯æœ€åˆçš„å€¼`0`ã€‚

## 2.7. æ„é€ æ–¹æ³•

### 2.7.1. \<cinit>()V æ–¹æ³•

```java
public class Test {
    static int i = 0;
    static {
        i = 1;
    }
    static {
        i = 2;
    }
}
```

ç¼–è¯‘å™¨ä¼šæŒ‰ä»ä¸Šè‡³ä¸‹çš„é¡ºåºï¼Œæ”¶é›†æ‰€æœ‰ `static` é™æ€ä»£ç å—å’Œé™æ€æˆå‘˜èµ‹å€¼çš„ä»£ç ï¼Œåˆå¹¶æˆä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³• `<cinit>()V` ã€‚

```sh
static {};
    descriptor: ()V
    flags: (0x0008) ACC_STATIC
    Code:
      stack=1, locals=0, args_size=0
         0: bipush        10
         2: putstatic     #3  // Field i:I
         5: bipush        20
         7: putstatic     #3  // Field i:I
        10: bipush        30
        12: putstatic     #3  // Field i:I
        15: return
```

`<cinit>()V` æ–¹æ³•ä¼šåœ¨ç±»çš„åˆå§‹åŒ–é˜¶æ®µè¢«è°ƒç”¨ã€‚

### 2.7.2. \<init>()V æ–¹æ³•

```java
public class Test {
    private String a = "s1";

    {
        b = 20;
    }

    private int b = 10;

    {
        a = "s2";
    }

    public Test(String a, int b) {
        this.a = a;
        this.b = b;
    }

    public static void main(String[] args) {
        Test test = new Test("s3", 30);
        System.out.println(test.a);		// s3
        System.out.println(test.b);		// 30
    }
}
```

ç¼–è¯‘å™¨ä¼šæŒ‰ä»ä¸Šè‡³ä¸‹çš„é¡ºåºï¼Œæ”¶é›†æ‰€æœ‰ `{}` ä»£ç å—å’Œæˆå‘˜èµ‹å€¼çš„ä»£ç ï¼Œåˆå¹¶æˆä¸€ä¸ªæ–°çš„æ„é€ æ–¹æ³• `<init>()V` ï¼Œå¹¶ä¸”åŸå§‹æ„é€ æ–¹æ³•æ–¹æ³•å†…çš„ä»£ç æ€»ä¼šæ”¾åˆ°æœ€åã€‚

```shell
public com.company.Test(java.lang.String, int);
    descriptor: (Ljava/lang/String;I)V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=2, locals=3, args_size=3
         0: aload_0
         1: invokespecial #1  // Method java/lang/Object."<init>":()V
         4: aload_0
         5: ldc           #2  // String s1
         7: putfield      #3  // Field a:Ljava/lang/String;
        10: aload_0
        11: bipush        20
        13: putfield      #4  // Field b:I
        16: aload_0
        17: bipush        10
        19: putfield      #4  // Field b:I
        22: aload_0
        23: ldc           #5  // String s2
        25: putfield      #3  // Field a:Ljava/lang/String;
        28: aload_0
        29: aload_1
        30: putfield      #3  // Field a:Ljava/lang/String;
        33: aload_0
        34: iload_2
        35: putfield      #4  // Field b:I
        38: return
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      39     0  this   Lcom/company/Test;
            0      39     1     a   Ljava/lang/String;
            0      39     2     b   I
```

## 2.8. æ–¹æ³•è°ƒç”¨

Java æºä»£ç ï¼š

```java
package com.company;

public class Test {
    public Test() {
    }

    private void test1() {
    }

    private final void test2() {
    }

    public void test3() {
    }

    public static void test4() {
    }

    public static void main(String[] args) {
        Test test = new Test();
        test.test1();
        test.test2();
        test.test3();
        test.test4();
        Test.test4();
    }
}
```

class å­—èŠ‚ç æŒ‡ä»¤éƒ¨åˆ†ï¼š

```shell
 0: new           #2	// class com/company/Test åœ¨å †ä¸­åˆ†é…å¯¹è±¡æ‰€éœ€è¦çš„å†…å­˜ï¼Œå¹¶æŠŠå¼•ç”¨å‹å…¥æ“ä½œæ•°æ ˆ
 3: dup					// æŠŠæ ˆé¡¶åœ°å€å¤åˆ¶ä¸€ä»½ï¼Œå¹¶æŠŠå¼•ç”¨å‹å…¥æ“ä½œæ•°æ ˆ
 4: invokespecial #3    // Method "<init>":()V	æ ˆé¡¶å¯¹è±¡è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆè°ƒç”¨ä¼šè¢«æ¶ˆè€—ï¼Œæ‰€ä»¥å¤åˆ¶ï¼‰
 7: astore_1			// æŠŠæ ˆé¡¶çš„å¯¹è±¡å¼•ç”¨å¼¹å‡ºï¼Œä¿å­˜åˆ°å±€éƒ¨å˜é‡è¡¨æ§½ä½1ä¸­
 8: aload_1				// è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆ
 9: invokevirtual #4    // Method test1:()V		æ ˆé¡¶å¯¹è±¡è°ƒç”¨æ–¹æ³•test1
12: aload_1				// è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆ
13: invokevirtual #5    // Method test2:()V		æ ˆé¡¶å¯¹è±¡è°ƒç”¨æ–¹æ³•test2
16: aload_1				// è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆ
17: invokevirtual #6    // Method test3:()V		æ ˆé¡¶å¯¹è±¡è°ƒç”¨æ–¹æ³•test3
20: aload_1				// è¯»å–å±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å€¼ï¼Œå¹¶å‹å…¥æ“ä½œæ•°æ ˆ
21: pop					// æŠŠæ ˆé¡¶çš„å¯¹è±¡å¼•ç”¨å¼¹å‡º
22: invokestatic  #7    // Method test4:()V		ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•test4
25: invokestatic  #7    // Method test4:()V		ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•test4
28: return
```

## 2.9. å¼‚å¸¸å¤„ç†

### 2.9.1. try-catch-finally

```java
public class Test {
    public static void main(String[] args) {
        int i = 0;
        try {
            i = 10;
        } catch (Exception e) {
            i = 20;
        } finally {
            i = 30;
        }
    }
}
```

class å­—èŠ‚ç éƒ¨åˆ†ï¼š

```shell
  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=4, args_size=1
         0: iconst_0
         1: istore_1			// ã€i=0ã€‘
         -------------------------------try
         2: bipush        10
         4: istore_1			// ã€i=10ã€‘
         -------------------------------finally
         5: bipush        30
         7: istore_1			// ã€i=30ã€‘
         8: goto          27
         -------------------------------catch
        11: astore_2
        12: bipush        20	
        14: istore_1			// ã€i=20ã€‘
         -------------------------------finally
        15: bipush        30
        17: istore_1			// ã€i=30ã€‘
        18: goto          27
        21: astore_3			// ã€æ²¡æœ‰åå­—çš„å±€éƒ¨å˜é‡è¡¨æ§½ä½3ã€‘
         -------------------------------finally
        22: bipush        30
        24: istore_1			// ã€i=30ã€‘
         -------------------------------error
        25: aload_3
        26: athrow				// ã€æŠ›å‡ºErrorã€‘
        27: return
      Exception table:
      // ã€ç›‘æµ‹å­—èŠ‚ç ç¬¬[from,to)è¡Œçš„è¿è¡Œï¼ŒæŠ›å‡ºå¼‚å¸¸åè·³è½¬è‡³targetè¡Œã€‘
         from    to  target type
             2     5    11   Class java/lang/Exception
             2     5    21   any	// ã€ç›‘æµ‹tryå—çš„å…¶ä»–å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚Errorã€‘
            11    15    21   any	// ã€ç›‘æµ‹catchå—çš„å…¶ä»–å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚Errorã€‘
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
           12       3     2     e   Ljava/lang/Exception;
            0      28     0  args   [Ljava/lang/String;
            2      26     1     i   I
```

### 2.9.2. finally å‡ºç° return

```java
public class Test {
    public static void main(String[] args) {
        System.out.println(test());		// 20
    }

    public static int test() {
        try {
            return 10;
        } finally {
            return 20;
        }
    }
}
```

class å­—èŠ‚ç éƒ¨åˆ†ï¼š

```shell
  public static int test();
    descriptor: ()I
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=2, args_size=0
         -------------------------------try
         0: bipush        10	// ã€10æ”¾å…¥æ ˆé¡¶ã€‘
         2: istore_0			// ã€10ä»æ ˆç§»é™¤ï¼Œæ”¾å…¥æ§½ä½0ã€‘
         -------------------------------finally
         3: bipush        20	// ã€20æ”¾å…¥æ ˆé¡¶ã€‘
         5: ireturn				// ã€ğŸ’¡è¿”å›æ ˆé¡¶çš„20ã€‘
         -------------------------------catch
         6: astore_1			// ã€æŠŠå¼‚å¸¸å¯¹è±¡æ”¾å…¥æ§½ä½1ã€‘
         -------------------------------finally
         7: bipush        20	// ã€20æ”¾å…¥æ ˆé¡¶ã€‘
         9: ireturn				// ã€è¿”å›æ ˆé¡¶çš„20ã€‘
      Exception table:
         from    to  target type
             0     3     6   any
```

`finally` ä¸­çš„ `ireturn` æŒ‡ä»¤è¢«å‡ºå…¥åˆ°äº†æ‰€æœ‰çš„å¯èƒ½æµç¨‹ï¼Œæ‰€ä»¥ç»“æœè‚¯å®šæ˜¯ä»¥ `finally` ä¸ºå‡†ã€‚

### 2.9.3. finally å¯¹è¿”å›å€¼çš„å½±å“

```java
public class Test {
    public static void main(String[] args) {
        System.out.println(test());		// 10
    }

    public static int test() {
        int i = 10;
        try {
            // returnä¹‹å‰å…ˆæš‚å­˜ï¼Œå¾…finallyæ‰§è¡Œå®Œæ¯•åï¼Œå†è¿”å›æš‚å­˜å€¼
            return i;
        } finally {
            i = 20;
        }
    }
}
```

class å­—èŠ‚ç éƒ¨åˆ†ï¼š

```shell
  public static int test();
    descriptor: ()I
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=3, args_size=0
         0: bipush        10	// ã€10æ”¾å…¥æ ˆé¡¶ã€‘
         2: istore_0			// ã€10ä»æ ˆç§»é™¤ï¼Œæ”¾å…¥æ§½ä½0ã€‘
         -------------------------------try
         3: iload_0				// ã€10ä»æ§½ä½0è¯»å–ï¼Œæ”¾å…¥æ ˆé¡¶ã€‘
         4: istore_1			// ã€10ä»æ ˆç§»é™¤ï¼Œæ”¾å…¥æ§½ä½1ã€‚æš‚å­˜ï¼Œå›ºå®šè¿”å›å€¼ã€‘
         -------------------------------finally
         5: bipush        20	// ã€20æ”¾å…¥æ ˆé¡¶ã€‘
         7: istore_0			// ã€20ä»æ ˆç§»é™¤ï¼Œæ”¾å…¥æ§½ä½0ã€‘
         -------------------------------return
         8: iload_1				// ã€10ä»æ§½ä½1è¯»å–ï¼Œæ”¾å…¥æ ˆé¡¶ã€‘
         9: ireturn				// ã€ğŸ’¡è¿”å›æ ˆé¡¶çš„10ã€‘
         -------------------------------catch
        10: astore_2			// ã€æŠŠå¼‚å¸¸å¯¹è±¡æ”¾å…¥æ§½ä½2ã€‘
         -------------------------------finally
        11: bipush        20
        13: istore_0
         -------------------------------error
        14: aload_2
        15: athrow
      Exception table:
         from    to  target type
             3     5    10   any
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            3      13     0     i   I
```

## 2.10. synchronized

synchronized å¿…é¡»è¦ä¿è¯ï¼ŒåŠ é”ä¹‹åï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿè¦æ­£ç¡®è§£é”ã€‚

```java
public class Test {
    public static void main(String[] args) {
        Object lock = new Object();
        synchronized (lock) {
            System.out.println("OK");
        }
    }
}
```

class å­—èŠ‚ç éƒ¨åˆ†ï¼š

```shell
  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=4, args_size=1
         0: new           #2	// ã€åœ¨å †ä¸­åˆ†é…å¯¹è±¡æ‰€éœ€è¦çš„å†…å­˜ï¼Œå¹¶æŠŠå¼•ç”¨å‹å…¥æ“ä½œæ•°æ ˆã€‘
         3: dup					// ã€æŠŠæ ˆé¡¶åœ°å€å¤åˆ¶ä¸€ä»½ï¼Œå¹¶æŠŠå¼•ç”¨å‹å…¥æ“ä½œæ•°æ ˆã€‘
         4: invokespecial #1    // ã€æ ˆé¡¶å¯¹è±¡è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆè°ƒç”¨ä¼šè¢«æ¶ˆè€—ï¼Œæ‰€ä»¥å¤åˆ¶ï¼‰ã€‘
         7: astore_1			// ã€æŠŠæ ˆé¡¶å¯¹è±¡lockå¼¹å‡ºï¼Œå¹¶æ”¾å…¥å±€éƒ¨å˜é‡è¡¨æ§½ä½1ã€‘
         -------------------------------synchronized
         8: aload_1				// ã€æŠŠå±€éƒ¨å˜é‡è¡¨æ§½ä½1çš„å¯¹è±¡lockå¼¹å‡ºï¼Œå‹å…¥æ“ä½œæ•°æ ˆã€‘
         9: dup					// ã€æŠŠæ ˆé¡¶å…ƒç´ çš„å¼•ç”¨å¤åˆ¶ä¸€ä»½ï¼Œå¹¶æŠŠå¼•ç”¨å‹å…¥æ“ä½œæ•°æ ˆã€‘
        10: astore_2			// ã€æŠŠæ ˆé¡¶å¯¹è±¡lockå¼¹å‡ºï¼Œå¹¶æ”¾å…¥å±€éƒ¨å˜é‡è¡¨æ§½ä½2ã€‘
        11: monitorenter		// ã€å¯¹æ ˆé¡¶å¯¹è±¡lockåŠ é”ï¼ˆå…¶å®æ˜¯æ§½ä½1çš„é‚£ä»½ï¼‰ã€‘
         -------------------------------print
        12: getstatic     #7
        15: ldc           #13
        17: invokevirtual #15
        20: aload_2				// ã€æŠŠå±€éƒ¨å˜é‡è¡¨æ§½ä½2çš„å¯¹è±¡lockå¼¹å‡ºï¼Œå‹å…¥æ“ä½œæ•°æ ˆã€‘
        21: monitorexit			// ã€å¯¹æ ˆé¡¶å¯¹è±¡lockè§£é”ã€‘
        22: goto          30	// ã€ç»“æŸã€‘
         -------------------------------error
        25: astore_3			// ã€æŠŠå¼‚å¸¸å¯¹è±¡æ”¾å…¥æ§½ä½2ã€‘
        26: aload_2				// ã€æŠŠå±€éƒ¨å˜é‡è¡¨æ§½ä½2çš„å¯¹è±¡lockå¼¹å‡ºï¼Œå‹å…¥æ“ä½œæ•°æ ˆã€‘
        27: monitorexit			// ã€å¯¹æ ˆé¡¶å¯¹è±¡lockè§£é”ã€‘
        28: aload_3
        29: athrow
        30: return
      Exception table:
         from    to  target type
            12    22    25   any
            25    28    25   any
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      31     0  args   [Ljava/lang/String;
            8      23     1  lock   Ljava/lang/Object;
```

---

<br/>

# 3. ç±»åŠ è½½

> https://www.jianshu.com/p/d432a94be182



Java ç±»åŠ è½½åˆ†ä¸º 5 ä¸ªè¿‡ç¨‹ï¼Œåˆ†åˆ«ä¸ºï¼š**åŠ è½½**ï¼Œ**é“¾æ¥**ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰ï¼Œ**åˆå§‹åŒ–**ï¼Œ**ä½¿ç”¨**ï¼Œ**å¸è½½**ã€‚

![](https://picture-1251081707.cos.ap-shanghai.myqcloud.com/20210309-152525-07b7b0b561266aafa5e188dfa4ffcd76.png)

è¿™äº›é˜¶æ®µæŒ‰é¡ºåºå¼€å§‹ï¼Œä½†ä¸æ˜¯æŒ‰é¡ºåºè¿›è¡Œæˆ–é¡ºåºå®Œæˆï¼Œé€šå¸¸æ˜¯äº¤å‰è¿›è¡Œçš„ï¼ˆä¸€ä¸ªé˜¶æ®µæ‰§è¡Œä¸­æ¿€æ´»å¦å¤–ä¸€ä¸ªé˜¶æ®µï¼‰ã€‚

## 3.1. åŠ è½½

### 3.1.1. éæ•°ç»„ç±»

é€šè¿‡ä¸€ä¸ªç±»çš„å®Œå…¨é™å®šæŸ¥æ‰¾æ­¤ç±»å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶åˆ©ç”¨å­—èŠ‚ç æ–‡ä»¶åˆ›å»ºä¸€ä¸ª Class å¯¹è±¡ã€‚

- ä½¿ç”¨ç±»åŠ è½½å™¨é€šè¿‡å®Œå…¨é™å®šåæ‰¾åˆ°å­—èŠ‚ç æ–‡ä»¶ï¼Œå°†å…¶ä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼è¯»å…¥å†…å­˜ã€‚
- å°†å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼ˆåŒ…å« class æ–‡ä»¶å¸¸é‡æ± è¿›å…¥è¿è¡Œæ—¶å¸¸é‡æ± çš„è¿‡ç¨‹ï¼‰ã€‚
- åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªè¯¥ç±»çš„ `java.lang.Class` å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚

### 3.1.2. æ•°ç»„ç±»

æœ¬èº«ä¸é€šè¿‡ç±»åŠ è½½å™¨åˆ›å»ºï¼Œè€Œæ˜¯ç”± Java è™šæ‹Ÿæœºç›´æ¥åˆ›å»ºï¼Œä½†æ•°ç»„ç±»çš„å…ƒç´ ç±»å‹ä½¿ç”¨ç±»åŠ è½½å™¨åˆ›å»ºã€‚

- å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹æ˜¯å¼•ç”¨ç±»å‹ï¼ˆå¦‚`Integer[]` ï¼‰ï¼Œé‚£å°±é€’å½’å»åŠ è½½è¿™ä¸ªç»„ä»¶ç±»å‹ï¼Œæ•°ç»„ç±»å°†åœ¨åŠ è½½è¯¥ç»„ä»¶ç±»å‹çš„ç±»åŠ è½½å™¨çš„ç±»åç§°ç©ºé—´ä¸Šè¢«æ ‡è¯†ã€‚
- å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼ˆå¦‚ `int[]` ï¼‰ï¼ŒJava è™šæ‹Ÿæœºå°†ä¼šæŠŠæ•°ç»„ç±»æ ‡è®°ä¸ºä¸å¼•å¯¼ç±»åŠ è½½å™¨å…³è”ã€‚
- æ•°ç»„ç±»çš„å¯è§æ€§ä¸å®ƒçš„ç»„ä»¶ç±»å‹çš„å¯è§æ€§ä¸€è‡´ï¼Œå¦‚æœç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£æ•°ç»„ç±»çš„å¯è§æ€§é»˜è®¤ä¸º publicã€‚

## 3.2. éªŒè¯

ç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºè§„èŒƒã€‚

### 3.2.1. æ–‡ä»¶æ ¼å¼éªŒè¯

éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆ Class æ–‡ä»¶æ ¼å¼çš„è§„èŒƒï¼Œä¸”èƒ½è¢«å½“å‰ç‰ˆæœ¬çš„è™šæ‹Ÿæœºå¤„ç†ã€‚

åªæœ‰é€šè¿‡åï¼Œå­—èŠ‚æµæ‰ä¼šè¿›å…¥å†…å­˜çš„æ–¹æ³•åŒºä¸­è¿›è¡Œå­˜å‚¨ã€‚ä»¥åçš„éªŒè¯é˜¶æ®µéƒ½æ˜¯åŸºäºæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æ„è¿›è¡Œï¼Œä¸ä¼šå†ç›´æ¥æ“ä½œå­—èŠ‚æµã€‚

- æ˜¯å¦ä»¥ 0xCAFEBABE å¼€å¤´ã€‚

- ä¸»ã€æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹Ÿæœºçš„å¤„ç†èŒƒå›´ä¹‹å†…ã€‚
- å¸¸é‡æ± ä¸­çš„å¸¸é‡æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„å¸¸é‡ç±»å‹ã€‚
- æŒ‡å‘å¸¸é‡çš„å„ç§ç´¢å¼•å€¼ä¸­æ˜¯å¦æœ‰æŒ‡å‘ä¸å­˜åœ¨çš„å¸¸é‡æˆ–ä¸ç¬¦åˆç±»å‹çš„å¸¸é‡ã€‚
- Class æ–‡ä»¶ä¸­å„ä¸ªéƒ¨åˆ†åŠæ–‡ä»¶æœ¬èº«æ˜¯å¦æœ‰è¢«åˆ é™¤çš„æˆ–é™„åŠ çš„å…¶ä»–ä¿¡æ¯ã€‚
- å…¶ä»–éªŒè¯...

### 3.2.2. å…ƒæ•°æ®éªŒè¯

å¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œä¿è¯å…¶æè¿°çš„ä¿¡æ¯ç¬¦åˆ Java è¯­è¨€è§„èŒƒçš„è¦æ±‚ã€‚

- è¿™ä¸ªç±»æ˜¯å¦æœ‰é™¤äº† `java.lang.Object` ä¹‹å¤–çš„çˆ¶ç±»ã€‚
- è¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯å¦ç»§æ‰¿äº†ä¸å…è®¸è¢«ç»§æ‰¿çš„ç±»ï¼ˆè¢« `final` ä¿®é¥°çš„ç±»ï¼‰ã€‚
- å¦‚æœè¿™ä¸ªç±»ä¸æ˜¯æŠ½è±¡ç±»ï¼Œæ˜¯å¦å®ç°äº†å…¶çˆ¶ç±»æˆ–æ¥å£ä¸­è¦æ±‚å®ç°çš„æ‰€æœ‰æ–¹æ³•ã€‚
- ç±»ä¸­çš„å­—æ®µã€æ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»äº§ç”ŸçŸ›ç›¾ã€‚
- å…¶ä»–éªŒè¯...

### 3.2.3. å­—èŠ‚ç éªŒè¯

å¯¹ç±»çš„æ–¹æ³•ä½“è¿›è¡Œæ ¡éªŒåˆ†æï¼Œä¿è¯æ–¹æ³•åœ¨è¿è¡Œæ—¶ä¸ä¼šå±å®³è™šæ‹Ÿæœºå®‰å…¨ã€‚

- ä¿è¯ä»»æ„æ—¶åˆ»æ“ä½œæ•°æ ˆçš„æ•°æ®ç±»å‹ä¸æŒ‡ä»¤ä»£ç åºåˆ—éƒ½èƒ½é…åˆå·¥ä½œã€‚
- ä¿è¯è·³è½¬æŒ‡ä»¤ä¸ä¼šè·³è½¬åˆ°æ–¹æ³•ä½“ä»¥å¤–çš„å­—èŠ‚ç æŒ‡ä»¤ä¸Šã€‚
- ä¿è¯æ–¹æ³•ä½“ä¸­çš„ç±»å‹è½¬æ¢æ˜¯æœ‰æ•ˆçš„ã€‚

### 3.2.4. ç¬¦å·å¼•ç”¨éªŒè¯

å‘ç”Ÿåœ¨è§£æé˜¶æ®µï¼Œå…¶å¯¹ç±»è‡ªèº«ä»¥å¤–ï¼ˆå¸¸é‡æ± ä¸­çš„å„ç§ç¬¦å·å¼•ç”¨ï¼‰çš„ä¿¡æ¯è¿›è¡ŒåŒ¹é…æ€§æ ¡éªŒï¼Œç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£å¸¸æ‰§è¡Œã€‚

- ç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å­—ç¬¦ä¸²æè¿°çš„å…¨é™å®šåæ˜¯å¦èƒ½æ‰¾åˆ°å¯¹åº”çš„ç±»ã€‚
- åœ¨æŒ‡å®šç±»ä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆæ–¹æ³•çš„å­—æ®µæè¿°ç¬¦ä»¥åŠç®€å•åç§°æ‰€æè¿°çš„æ–¹æ³•å’Œå­—æ®µã€‚
- ç¬¦å·å¼•ç”¨ä¸­çš„ç±»ã€å­—æ®µã€æ–¹æ³•çš„è®¿é—®æ€§æ˜¯å¦å¯è¢«å½“å‰ç±»è®¿é—®ã€‚

## 3.3. å‡†å¤‡

ä¸ºç±»å˜é‡ï¼ˆstatic å˜é‡ï¼‰åˆ†é…å†…å­˜å¹¶ä¸”è®¾ç½®è¯¥ç±»å˜é‡çš„åˆå§‹å€¼ï¼Œè¿™äº›å†…å­˜éƒ½å°†åˆ†é…åœ¨æ–¹æ³•åŒºä¸­ã€‚ä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨ Java å †ä¸­ã€‚

é€šå¸¸æ˜¯æ•°æ®ç±»å‹é»˜è®¤çš„åˆå§‹å€¼ï¼Œè€Œä¸æ˜¯è¢«åœ¨ Java ä»£ç ä¸­è¢«æ˜¾å¼åœ°èµ‹äºˆçš„å€¼ã€‚

- åŸºæœ¬æ•°æ®ç±»å‹çš„ç±»å˜é‡å’Œå…¨å±€å˜é‡ï¼Œé»˜è®¤ä¸ºé›¶å€¼ï¼ˆ`0`ã€`false`ã€`''`ï¼‰ï¼Œè€Œå±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»æ˜¾å¼åœ°èµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚
- å¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œé»˜è®¤ä¸ºé›¶å€¼ï¼ˆ`null`ï¼‰ã€‚
- è¢« `static` å’Œ `final` ä¿®é¥°çš„å¸¸é‡ï¼Œå¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™æ˜¾å¼åœ°èµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸º `final` åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šåˆ†é…äº†ã€‚
- è¢« `final` ä¿®é¥°çš„å¸¸é‡ï¼Œæ²¡æœ‰é»˜è®¤é›¶å€¼ï¼Œæ—¢å¯ä»¥åœ¨å£°æ˜æ—¶æ˜¾å¼åœ°èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»åˆå§‹åŒ–æ—¶ï¼ˆæ„é€ æ–¹æ³•ä¸­ï¼‰æ˜¾å¼åœ°èµ‹å€¼ã€‚
- åœ¨æ•°ç»„åˆå§‹åŒ–æ—¶ï¼Œæ•°ç»„ä¸­çš„å„å…ƒç´ å°†æ ¹æ®å¯¹åº”æ•°æ®ç±»å‹è¢«èµ‹äºˆé»˜è®¤å€¼ã€‚

```java
public class Test {
    // åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå‡†å¤‡é˜¶æ®µå€¼åˆ›å»ºå˜é‡
    static int a;
    // å‡†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå‡†å¤‡é˜¶æ®µå€¼åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–é˜¶æ®µ<cinit>ä¸­èµ‹å€¼
    static int b = 10;
    // åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå‡†å¤‡é˜¶æ®µå€¼åˆ›å»ºå˜é‡å¹¶èµ‹å€¼
    static final int c = 20;
    // Stringç±»å‹ï¼Œå‡†å¤‡é˜¶æ®µå€¼åˆ›å»ºå˜é‡å¹¶èµ‹å€¼
    static final String d = "OK";
    // å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå‡†å¤‡é˜¶æ®µå€¼åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–é˜¶æ®µ<cinit>ä¸­èµ‹å€¼
    static final Object e = new Object();
}
```

class å­—èŠ‚ç ï¼š

```shell
{
  static int a;
    descriptor: I
    flags: (0x0008) ACC_STATIC
    							// ã€æ²¡æœ‰å€¼ã€‘

  static int b;
    descriptor: I
    flags: (0x0008) ACC_STATIC
    							// ã€æ²¡æœ‰å€¼ï¼Œåˆå§‹åŒ–é˜¶æ®µ<cinit>ä¸­èµ‹å€¼ã€‘

  static final int c;
    descriptor: I
    flags: (0x0018) ACC_STATIC, ACC_FINAL
    ConstantValue: int 20		// ã€ç¼–è¯‘é˜¶æ®µç¡®å®šå€¼ï¼Œå‡†å¤‡é˜¶æ®µç›´æ¥èµ‹å€¼ã€‘

  static final java.lang.String d;
    descriptor: Ljava/lang/String;
    flags: (0x0018) ACC_STATIC, ACC_FINAL
    ConstantValue: String OK	// ã€ç¼–è¯‘é˜¶æ®µç¡®å®šå€¼ï¼Œå‡†å¤‡é˜¶æ®µç›´æ¥èµ‹å€¼ã€‘

  static final java.lang.Object e;
    descriptor: Ljava/lang/Object;
    flags: (0x0018) ACC_STATIC, ACC_FINAL
    							// ã€æ²¡æœ‰å€¼ï¼Œåˆå§‹åŒ–é˜¶æ®µ<cinit>ä¸­èµ‹å€¼ã€‘

  static {};
    descriptor: ()V
    flags: (0x0008) ACC_STATIC
    Code:
      stack=2, locals=0, args_size=0
      	 --------------------------ã€å¯¹bèµ‹åˆå§‹å€¼10ã€‘
         0: bipush        10
         2: putstatic     #7	// Field b:I
         --------------------------ã€è°ƒç”¨Objectçš„æ„é€ æ–¹æ³•ï¼Œå¯¹eèµ‹åˆå§‹å€¼ã€‘
         5: new           #2	// class java/lang/Object
         8: dup
         9: invokespecial #1	// Method java/lang/Object."<init>":()V
        12: putstatic     #13	// Field e:Ljava/lang/Object;
        15: return
}
```

## 3.4. è§£æ

è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„**ç¬¦å·å¼•ç”¨**æ›¿æ¢ä¸º**ç›´æ¥å¼•ç”¨**çš„è¿‡ç¨‹ï¼Œæœ‰ç±»æˆ–æ¥å£çš„è§£æï¼Œå­—æ®µè§£æï¼Œç±»æ–¹æ³•è§£æï¼Œæ¥å£æ–¹æ³•è§£æç­‰ã€‚

- ç¬¦å·å¼•ç”¨ï¼šä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼Œå¯ä»¥æ˜¯ä»»ä½•å­—é¢é‡ï¼ˆç®€å•è€Œè¨€å°±æ˜¯ä»£ç ï¼‰ã€‚
- ç›´æ¥å¼•ç”¨ï¼šç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–ä¸€ä¸ªé—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ï¼ˆç®€å•è€Œè¨€å°±æ˜¯å†…å­˜åœ°å€ï¼‰ã€‚

```java
package com.company;

public class Test {
    public static void main(String[] args) throws ClassNotFoundException {
        ClassLoader classLoader = Test.class.getClassLoader();
        // åªåšAç±»çš„åŠ è½½ï¼Œä¸ä¼šåšAç±»çš„è§£æåŠåç»­æµç¨‹ï¼Œå› æ­¤å†…éƒ¨çš„Bç±»ä¹Ÿä¸ä¼šåŠ è½½
        Class<?> aClass = classLoader.loadClass("com.company.A");
        // ä¼šåšAç±»çš„åŠ è½½ï¼Œä¸”ä¼šæ‰§è¡Œè§£æåŠåç»­æµç¨‹ï¼Œå› æ­¤å†…éƒ¨çš„Bç±»ä¹Ÿä¼šåŠ è½½
        A a = new A();
    }
}

class A {
    B b = new B();
}

class B {
}
```

## 3.5. åˆå§‹åŒ–

å¯¹ç±»çš„é™æ€å˜é‡èµ‹çœŸæ­£çš„åˆå§‹å€¼ï¼Œå¯¹æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ã€‚å³æ‰§è¡Œ `<cinit>()V` æ–¹æ³•ï¼Œå¹¶ä¸”è™šæ‹Ÿæœºä¼šä¿è¯çº¿ç¨‹å®‰å…¨ã€‚

```java
// ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š
// â‘  å£°æ˜ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ï¼›
static int i = 5; 
// â‘¡ ä½¿ç”¨é™æ€ä»£ç å—ä¸ºç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ã€‚
static int i; 
static { i = 5; }
```

### 3.5.1. åˆå§‹åŒ–é¡ºåº

1. å‡å¦‚ç±»è¿˜æ²¡æœ‰è¢«åŠ è½½å’Œè¿æ¥ï¼Œåˆ™ç¨‹åºå…ˆåŠ è½½å¹¶è¿æ¥è¯¥ç±»ã€‚
2. å‡å¦‚ç±»çš„ç›´æ¥çˆ¶ç±»è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶ç›´æ¥çˆ¶ç±»ã€‚
3. å‡å¦‚ç±»ä¸­æœ‰åˆå§‹åŒ–è¯­å¥ï¼Œåˆ™ç³»ç»Ÿä¾æ¬¡æ‰§è¡Œè¿™äº›åˆå§‹åŒ–è¯­å¥ã€‚

### 3.5.2. ä¸»åŠ¨å¼•ç”¨ï¼ˆåˆå§‹åŒ–æ—¶æœºï¼‰

åªæœ‰å½“å¯¹ç±»ä¸»åŠ¨å¼•ç”¨çš„æ—¶å€™æ‰ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ã€‚

- JVM å¯åŠ¨æ—¶çš„å¯åŠ¨ç±»ï¼ˆåŒ…å« `main()` æ–¹æ³•çš„ç±»ï¼‰ã€‚
- é¦–æ¬¡è®¿é—®ç±»/æ¥å£çš„é™æ€å˜é‡ï¼Œè°ƒç”¨ç±»çš„é™æ€æ–¹æ³•ã€‚
- å­ç±»åˆå§‹åŒ–æ—¶ï¼Œå…¶çˆ¶ç±»ä¹Ÿä¼šè¢«åˆå§‹åŒ–ï¼›å­æ¥å£åˆå§‹åŒ–æ—¶ï¼Œå…¶çˆ¶æ¥å£ä¸ä¼šè¢«åˆå§‹åŒ–ã€‚
- åˆ›å»ºç±»çš„å®ä¾‹ï¼ˆ`new`ã€åå°„ã€`clone`ã€ååºåˆ—åŒ–ï¼‰ã€‚
- ä½¿ç”¨ `java.lang.reflect` åŒ…ä¸­çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨ã€‚

### 3.5.3. è¢«åŠ¨å¼•ç”¨ï¼ˆä¸ä¼šåˆå§‹åŒ–ï¼‰

å½“å¯¹ç±»è¢«åŠ¨å¼•ç”¨çš„æ—¶å€™ä¸ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ã€‚

**ã€é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å˜é‡ã€‘**

åªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ï¼Œè€Œä¸ä¼šè§¦å‘å­ç±»çš„åˆå§‹åŒ–ã€‚

```java
// çˆ¶ç±»
public class SuperClass {
    static {
        System.out.println("çˆ¶ç±»æ­£åœ¨åˆå§‹åŒ–");
    }

    public static String name = "è¿™æ˜¯çˆ¶ç±»";
}
// å­ç±»
public class SubClass extends SuperClass {
    static {
        System.out.println("å­ç±»æ­£åœ¨åˆå§‹åŒ–");
    }
}
// æµ‹è¯•ç±»
public class InitTest {
    public static void main(String[] args) {
        // é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»ä¸­å®šä¹‰çš„é™æ€å˜é‡ï¼Œä¸ä¼šåˆå§‹åŒ–å­ç±»
        System.out.println(SubClass.name);
        // è¿è¡Œç»“æœï¼š
        // çˆ¶ç±»æ­£åœ¨åˆå§‹åŒ–
        // è¿™æ˜¯çˆ¶ç±»
    }
}
```

ã€**é€šè¿‡æ•°ç»„å®šä¹‰é›†åˆå®šä¹‰æ¥å¼•ç”¨ç±»**ã€‘

JVM ä¼šè‡ªåŠ¨ç”Ÿæˆç”Ÿæˆä¸€ä¸ªç»§æ‰¿äº `Object` çš„å­ç±»ï¼Œå¹¶ç”±å­—èŠ‚ç æŒ‡ä»¤ `newarray` åˆ›å»ºã€‚

```java
// æµ‹è¯•ç±»
public class InitTest {
    public static void main(String[] args) {
        SuperClass[] arrays = new SuperClass[10];
        ArrayList<SubClass> list = new ArrayList<>();
        System.out.println("æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼š" + arrays.length);
        System.out.println("åˆ—è¡¨å…ƒç´ ä¸ªæ•°ï¼š" + list.size());
        // è¿è¡Œç»“æœï¼š
        // æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼š10
        // åˆ—è¡¨å…ƒç´ ä¸ªæ•°ï¼š0
    }
}
```

**ã€é™æ€å¸¸é‡ã€‘**

é™æ€å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œå› æ­¤ä¸ä¼šè§¦å‘åˆå§‹åŒ–ã€‚

```java
// å¸¸é‡ç±»
public class ConstClass {
    static {
        System.out.println("æœ‰å¸¸é‡çš„ç±»æ­£åœ¨åˆå§‹åŒ–");
    }

    public static final String NAME = "è¿™æ˜¯å¸¸é‡ç±»";
}
// æµ‹è¯•ç±»
public class InitTest {
    public static void main(String[] args) {
        System.out.println(ConstClass.NAME);
        // è¿è¡Œç»“æœï¼š
        // è¿™æ˜¯å¸¸é‡ç±»
    }
}
```

### 3.5.4. åˆå§‹åŒ–æ€»ç»“

**â‘  åˆ¤æ–­ä½¿ç”¨ aã€bã€c è¿™ä¸‰ä¸ªå¸¸é‡ï¼Œæ˜¯å¦ä¼šå¯¼è‡´ç±» A åˆå§‹åŒ–ã€‚**

```java
public class Test {
    public static void main(String[] args) {
        System.out.println(A.a);	// ä¸ä¼šå¯¼è‡´Aåˆå§‹åŒ–
        System.out.println(A.b);	// ä¸ä¼šå¯¼è‡´Aåˆå§‹åŒ–
        System.out.println(A.c);	// ä¼šå¯¼è‡´Aåˆå§‹åŒ–
    }
}

class A {
    public static final int a = 10;			// é™æ€åŸºæœ¬ç±»å‹å¸¸é‡ï¼Œä¸ä¼šåˆå§‹åŒ–
    public static final String b = "Hello";	// é™æ€å­—ç¬¦ä¸²ç±»å‹å¸¸é‡ï¼Œä¸ä¼šåˆå§‹åŒ–
    public static final Integer c = 20;		// é™æ€å¼•ç”¨ç±»å‹å¸¸é‡ï¼Œä¼šåˆå§‹åŒ–
}
```

**â‘¡ é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ï¼ˆæ‡’æƒ°åˆå§‹åŒ–ï¼‰**

```java
public class Singleton {
    private Singleton() {
    }
    // é™æ€å†…éƒ¨ç±»ä¿å­˜å•ä¾‹å¯¹è±¡
    private static class LazyHolder {
        static final Singleton INSTANCE = new Singleton();
    }

    // é¦–æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ‰ä¼šå¯¼è‡´é™æ€å†…éƒ¨ç±»åˆå§‹åŒ–ï¼Œå¹¶åˆå§‹åŒ–é™æ€æˆå‘˜
    public static Singleton getInstance() {
        return LazyHolder.INSTANCE;
    }
}
```

---

<br/>

# 4. ç±»åŠ è½½å™¨

ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½æ‰€æœ‰çš„ç±»ï¼Œåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚å¹¶ä¸”é‡‡ç”¨æŒ‰éœ€åŠ è½½æ¨¡å¼ã€‚

## 4.1. ç±»åŠ è½½å™¨çš„åˆ†ç±»

| åç§°                    | åŠ è½½ç±»çš„ä½ç½®              | è¯´æ˜               |
| ----------------------- | ------------------------- | ------------------ |
| Bootstrap Classloader   | $JAVA_HOME/jre/lib/rt.jar | ä¸èƒ½ç›´æ¥è®¿é—®ä½¿ç”¨   |
| Extension Classloader   | $JAVA_HOME/jre/lib/ext    | ä¸Šçº§ä¸º Bootstrap   |
| Application Classloader | $classpath                | ä¸Šçº§ä¸º Extension   |
| è‡ªå®šä¹‰ Classloader      | è‡ªå®šä¹‰                    | ä¸Šçº§ä¸º Application |

### 4.1.1. å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap Classloaderï¼‰

ç”± C++ è¯­è¨€å®ç°ï¼Œå¹¶ä¸ç»§æ‰¿è‡ª `java.lang.ClassLoader`ï¼Œæ˜¯è™šæ‹Ÿæœºè‡ªèº«çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦åŠ è½½ JVM è‡ªèº«éœ€è¦çš„ç±»ã€‚

- åŠ è½½ Java çš„æ ¸å¿ƒåº“ï¼ˆJAVA_HOME/jre/lib/rt.jar å’Œ sun.boot.class.path è·¯å¾„ä¸‹çš„å†…å®¹ï¼‰ï¼ŒåŠ è½½åŒ…åä¸º javaã€javaxã€sun ç­‰å¼€å¤´çš„ç±»ã€‚
- åŠ è½½æ‰©å±•ç±»åŠ è½½å™¨å’Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œå¹¶æŒ‡å®šä»–ä»¬çš„çˆ¶ç±»åŠ è½½å™¨ã€‚

### 4.1.2. æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension Classloaderï¼‰

ç”± Java è¯­è¨€å®ç°ï¼Œçˆ¶ç±»åŠ è½½å™¨ä¸º nullã€‚

- ç”¨æ¥åŠ è½½ Java çš„æ‰©å±•åº“ (JAVA_HOME/jre/ext/*.jarï¼Œæˆ– java.ext.dirs è·¯å¾„ä¸‹çš„å†…å®¹) ã€‚
- ç”± ExtClassLoader å®ç°ã€‚

### 4.1.3. åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication Classloaderï¼‰

ç”± Java è¯­è¨€å®ç°ï¼Œçˆ¶ç±»åŠ è½½å™¨ä¸º ExtClassLoaderã€‚ä¹Ÿç§°ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚

- å®ƒæ ¹æ® Java åº”ç”¨çš„ç±»è·¯å¾„ï¼ˆclasspathï¼Œjava.class.path è·¯å¾„ä¸‹çš„å†…å®¹ï¼‰æ¥åŠ è½½ Java ç±»ã€‚ä¸€èˆ¬æ¥è¯´ Java åº”ç”¨çš„ç±»éƒ½æ˜¯å®ƒåŠ è½½çš„ã€‚
- ç”± AppClassLoader å®ç°ã€‚

### 4.1.4. è‡ªå®šä¹‰ç±»åŠ è½½å™¨

éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„æƒ…å†µï¼š

- æƒ³åŠ è½½é classpath éšæ„è·¯å¾„ä¸­çš„ç±»æ–‡ä»¶ã€‚
- éƒ½æ˜¯é€šè¿‡æ¥å£æ¥ä½¿ç”¨å®ç°ï¼Œå¸Œæœ›è§£è€¦æ—¶ï¼Œå¸¸ç”¨åœ¨æ¡†æ¶è®¾è®¡ã€‚
- è¿™äº›ç±»å¸Œæœ›äºˆä»¥éš”ç¦»ï¼Œä¸åŒåº”ç”¨çš„åŒåç±»éƒ½å¯ä»¥åŠ è½½ï¼Œä¸å†²çªï¼Œå¸¸è§äº tomcat å®¹å™¨ã€‚

ç»§æ‰¿ java.lang.ClassLoader ç±»ï¼Œå®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ã€‚

- éµå®ˆåŒäº²å§”æ´¾æ¨¡å‹ï¼šç»§æ‰¿ ClassLoaderï¼Œé‡å†™ `findClass()` æ–¹æ³•ã€‚
- ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼šç»§æ‰¿ ClassLoaderï¼Œé‡å†™ `loadClass()` æ–¹æ³•ã€‚

è‡ªå®šä¹‰ä»£ç ï¼š

```java
public class MyClassLoader extends ClassLoader {

    @Override
    protected Class<?> findClass(String name) throws ClassNotFoundException {
        // å›ºå®šåŠ è½½æŸä¸ªç›®å½•ä¸‹çš„classæ–‡ä»¶
        String path = "E:\\myclasspath\\" + name + ".class";

        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {
            Files.copy(Paths.get(path), outputStream);
            byte[] bytes = outputStream.toByteArray();
            return defineClass(name, bytes, 0, bytes.length);
        } catch (IOException e) {
            e.printStackTrace();
            throw new ClassNotFoundException(name, e);
        }
    }
}
```

ä½¿ç”¨ï¼š

```java
MyClassLoader classLoader1 = new MyClassLoader();
MyClassLoader classLoader2 = new MyClassLoader();

Class<?> c1 = classLoader1.findClass("Test");
Class<?> c2 = classLoader1.findClass("Test");
Class<?> c3 = classLoader2.findClass("Test");

System.out.println(c1 == c2);   // trueã€‚ å…¨é™å®šåå’Œç±»åŠ è½½å™¨éƒ½ç›¸åŒï¼ŒåªåŠ è½½1æ¬¡
System.out.println(c1 == c3);   // falseã€‚ ç±»åŠ è½½å™¨ä¸ç›¸åŒï¼Œä¼šåŠ è½½2æ¬¡
```

## 4.2. ç±»åŠ è½½æ­¥éª¤

1. æ£€æµ‹æ­¤ Class æ˜¯å¦åŠ è½½è¿‡ï¼ˆç¼“å†²åŒºä¸­æ˜¯å¦æœ‰æ­¤ Classï¼‰ï¼Œå¦‚æœæœ‰ç›´æ¥è¿›å…¥ç¬¬ 8 æ­¥ï¼Œå¦åˆ™è¿›å…¥ç¬¬ 2 æ­¥ã€‚
2. å¦‚æœæ²¡æœ‰ä¸Šçº§åŠ è½½å™¨ï¼Œåˆ™è¦ä¹ˆ Parent æ˜¯æ ¹ç±»åŠ è½½å™¨ï¼Œè¦ä¹ˆæœ¬èº«å°±æ˜¯æ ¹ç±»åŠ è½½å™¨ï¼Œåˆ™è·³åˆ°ç¬¬ 4 æ­¥ï¼Œå¦‚æœä¸Šçº§åŠ è½½å™¨å­˜åœ¨ï¼Œåˆ™è¿›å…¥ç¬¬ 3 æ­¥ã€‚
3. è¯·æ±‚ä½¿ç”¨ä¸Šçº§åŠ è½½å™¨å»è½½å…¥ç›®æ ‡ç±»ï¼Œå¦‚æœè½½å…¥æˆåŠŸåˆ™è·³è‡³ç¬¬ 8 æ­¥ï¼Œå¦åˆ™æ¥ç€æ‰§è¡Œç¬¬ 5 æ­¥ã€‚
4. è¯·æ±‚ä½¿ç”¨æ ¹ç±»åŠ è½½å™¨å»è½½å…¥ç›®æ ‡ç±»ï¼Œå¦‚æœè½½å…¥æˆåŠŸåˆ™è·³è‡³ç¬¬ 8 æ­¥ï¼Œå¦åˆ™è·³è‡³ç¬¬ 7 æ­¥ã€‚
5. å½“å‰ç±»åŠ è½½å™¨å°è¯•å¯»æ‰¾ Class æ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°åˆ™æ‰§è¡Œç¬¬ 6 æ­¥ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™æ‰§è¡Œç¬¬ 7 æ­¥ã€‚
6. ä»æ–‡ä»¶ä¸­è½½å…¥ Classï¼ŒæˆåŠŸåè·³è‡³ç¬¬ 8 æ­¥ã€‚
7. æŠ›å‡º `ClassNotFountException` å¼‚å¸¸ã€‚
8. è¿”å›å¯¹åº”çš„ `java.lang.Class` å¯¹è±¡ã€‚

## 4.3. ç±»åŠ è½½æœºåˆ¶

- å…¨ç›˜è´Ÿè´£ï¼šåŒä¸€ä¸ªç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½è¯¥ Classï¼Œä»¥åŠæ‰€ä¾èµ–å’Œå¼•ç”¨çš„å…¶ä»– Classï¼Œé™¤éæ˜¾å¼æŒ‡å®šå…¶ä»–ç±»åŠ è½½å™¨ã€‚

- åŒäº²å§”æ´¾ï¼šå…ˆè®©ä¸Šçº§åŠ è½½å™¨å°è¯•åŠ è½½è¯¥ Classï¼Œåªæœ‰åœ¨ä¸Šçº§åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»æ—¶ï¼Œè‡ªå·±æ‰å°è¯•åŠ è½½è¯¥ç±»ã€‚
- ç¼“å­˜æœºåˆ¶ï¼šç¨‹åºéœ€è¦ä½¿ç”¨æŸä¸ª Class æ—¶ï¼Œç±»åŠ è½½å™¨å…ˆä»ç¼“å­˜åŒºä¸­è·å–ï¼Œåªæœ‰ä¸å­˜åœ¨æ—¶æ‰æ‰§è¡ŒåŠ è½½å¹¶å­˜å…¥ç¼“å†²åŒºã€‚å› æ­¤åŠ¨æ€ä¿®æ”¹äº† Class åï¼Œå¿…é¡»é‡å¯ JVM åä¿®æ”¹æ‰ä¼šç”Ÿæ•ˆã€‚

## 4.4. åŒäº²å§”æ´¾

![](https://picture-1251081707.cos.ap-shanghai.myqcloud.com/20210309-152815-9a70ca77b3c8da6290801ee44601c4f0.png)

### 4.4.1. æ‰§è¡Œæµç¨‹

- ä¸Šæµ®ï¼šä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°åŠ è½½è¯·æ±‚ï¼Œä»–å¹¶ä¸ä¼šå»åŠ è½½è¯¥ç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™ä¸Šçº§åŠ è½½å™¨ï¼ˆå±‚å±‚å¾€ä¸Šï¼‰ï¼Œå› æ­¤æ‰€æœ‰çš„ç±»åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½ä¼šä¼ é€åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ã€‚
- ä¸‹æ²‰ï¼šåªæœ‰å½“ä¸Šçº§åŠ è½½å™¨åœ¨å…¶æœç´¢èŒƒå›´å†…æ— æ³•æ‰¾åˆ°æ‰€éœ€çš„ç±»ï¼Œä¸‹çº§åŠ è½½å™¨ä¼šå°è¯•å»è‡ªå·±åŠ è½½ï¼ˆå±‚å±‚å¾€ä¸‹ï¼‰ã€‚

```java
// æŠ½è±¡ç±» ClassLoader.java
protected Class<?> loadClass(String name, boolean resolve) throws ClassNotFoundException {
    synchronized (getClassLoadingLock(name)) {
        // å…ˆæ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡äº†
        Class<?> c = findLoadedClass(name);
        if (c == null) {
            long t0 = System.nanoTime();
            try {
                if (parent != null) {
                    // å¦‚æœæœ‰ä¸Šçº§åŠ è½½å™¨ï¼Œåˆ™å…ˆäº¤ç»™ä¸Šçº§åŠ è½½å™¨å»åŠ è½½
                    c = parent.loadClass(name, false);
                } else {
                    // å¦‚æœæ²¡æœ‰ä¸Šçº§åŠ è½½å™¨ï¼Œè‡ªå·±æ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦å·²ç»åŠ è½½
                    // å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œåˆ™è¯´æ˜å‘ä¸Šå§”æ‰˜æµç¨‹ä¸­æ²¡æœ‰åŠ è½½è¯¥ç±»
                    c = findBootstrapClassOrNull(name);
                }
            } catch (ClassNotFoundException e) {
            }
			// å‘ä¸Šå’Œå‘ä¸‹æµç¨‹éƒ½èµ°å®Œäº†
            if (c == null) {
                // å¦‚æœä»ç„¶æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è°ƒç”¨è‡ªèº«çš„findClassæ–¹æ³•å»æŸ¥æ‰¾è¯¥ç±»
                // findClassæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œç”±å…·ä½“çš„ClassLoaderç»§æ‰¿ç±»å»å®ç°
                long t1 = System.nanoTime();
                c = findClass(name);
				// è®°å½•åŠ è½½è€—æ—¶ä¿¡æ¯
                PerfCounter.getParentDelegationTime().addTime(t1 - t0);
                PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);
                PerfCounter.getFindClasses().increment();
            }
        }
        if (resolve) {
            resolveClass(c);
        }
        return c;
    }
}
```

### 4.4.2. åŒäº²å§”æ´¾çš„ä¼˜ç‚¹

- é¿å…é‡å¤åŠ è½½ã€‚ç›¸åŒçš„ class æ–‡ä»¶è¢«ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½å°±æ˜¯ä¸åŒçš„ä¸¤ä¸ªç±»ï¼Œä¸Šçº§åŠ è½½å™¨å·²ç»åŠ è½½è¿‡è¯¥ç±»ï¼Œä¸‹çº§åŠ è½½å™¨æ²¡å¿…è¦å†åŠ è½½ä¸€æ¬¡ã€‚
- æé«˜å®‰å…¨æ€§ã€‚é˜²æ­¢ç”¨æˆ·è‡ªå·±ç¼–å†™çš„ç±»åŠ¨æ€æ›¿æ¢ Java çš„ä¸€äº›æ ¸å¿ƒç±»ã€‚ï¼ˆæ¯”å¦‚ `java.lang.Integer`ï¼Œè€Œå¯åŠ¨ç±»åŠ è½½å™¨æ‰¾åˆ°äº†è¿™ä¸ªåå­—ä¸”è¯¥ç±»å·²è¢«åŠ è½½ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šé‡æ–°åŠ è½½å…¶ä»–çš„ `java.lang.Integer`ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å·²åŠ è½½è¿‡çš„ Integer.classï¼‰

### 4.4.3. ç ´ååŒäº²å§”æ´¾

- åŒäº²å§”æ´¾æ¨¡å‹ä¸æ˜¯ä¸€ç§å¼ºåˆ¶æ€§çº¦æŸï¼Œå®ƒæ˜¯ä¸€ç§ Java è®¾è®¡è€…æ¨èä½¿ç”¨ç±»åŠ è½½å™¨çš„æ–¹å¼ã€‚
- æœ‰æ—¶å¿…é¡»è¿åè¿™ä¸ªçº¦æŸã€‚ä¾‹å¦‚ SPIï¼ˆService Provider Interfaceï¼‰, æ˜¯ Java æä¾›çš„ä¸€å¥—ç”¨æ¥è¢«ç¬¬ä¸‰æ–¹å®ç°æˆ–è€…æ‰©å±•çš„ APIï¼Œå®ƒå¯ä»¥ç”¨æ¥å¯ç”¨æ¡†æ¶æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶ã€‚
- çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆThread Context ClassLoaderï¼‰å¯ä»¥é€šè¿‡ `java.lang.Thread` ç±»çš„ `setContextClassLoader()` æ–¹æ³•è®¾ç½®ï¼Œé»˜è®¤ä»çˆ¶çº¿ç¨‹ä¸­ç»§æ‰¿ï¼ˆçˆ¶çº¿ç¨‹é»˜è®¤ä¸ºåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼‰ã€‚

